{"version":3,"file":"static/js/532.94a46a6b.chunk.js","mappings":"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","sources":["shared/web-shared/snippet/theme/databricks-duotone-dark.ts","common/components/AliasSelect.tsx","common/hooks/useEditAliasesModal.tsx","shared/web-shared/copy/CopyActionButton.tsx","experiment-tracking/components/artifact-view-components/ShowArtifactCodeSnippet.tsx","shared/web-shared/copy/useCopyController.tsx","shared/web-shared/snippet/theme/databricks-light.ts","experiment-tracking/pages/prompts/hooks/usePromptDetailsQuery.tsx","experiment-tracking/pages/prompts/components/PromptVersionsTableAliasesCell.tsx","experiment-tracking/pages/prompts/components/PromptVersionsDiffSelectorButton.tsx","experiment-tracking/pages/prompts/components/PromptVersionsTable.tsx","experiment-tracking/pages/prompts/hooks/usePromptDetailsPageViewState.tsx","experiment-tracking/pages/prompts/components/PromptVersionRuns.tsx","experiment-tracking/pages/prompts/components/PromptVersionTags.tsx","experiment-tracking/pages/prompts/components/PromptVersionMetadata.tsx","experiment-tracking/pages/prompts/hooks/usePromptRunsInfo.tsx","experiment-tracking/pages/prompts/components/PromptContentPreview.tsx","experiment-tracking/pages/prompts/hooks/useDeletePromptVersionModal.tsx","experiment-tracking/pages/prompts/components/PromptContentCompare.tsx","experiment-tracking/pages/prompts/components/PromptDetailsTagsBox.tsx","experiment-tracking/pages/prompts/components/PromptNotFoundView.tsx","experiment-tracking/pages/prompts/PromptsDetailsPage.tsx","experiment-tracking/pages/prompts/hooks/useDeletePromptModal.tsx","experiment-tracking/pages/prompts/hooks/useUpdatePromptVersionMetadataModal.tsx","common/components/AliasTag.tsx","model-registry/components/aliases/ModelVersionTableAliasesCell.tsx","shared/web-shared/snippet/actions/SnippetActionButton.tsx","shared/web-shared/snippet/actions/SnippetCopyAction.tsx","shared/web-shared/snippet/index.tsx"],"sourcesContent":["/**\n * Adapted from `duotone-dark`\n * Ref: https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/b2457268891948f7005ccf539a70c000f0695bde/src/styles/prism/duotone-dark.js\n */\n\nconst databricksDuotoneDarkTheme = {\n  'code[class*=\"language-\"]': {\n    fontFamily:\n      'Consolas, Menlo, Monaco, \"Andale Mono WT\", \"Andale Mono\", \"Lucida Console\", \"Lucida Sans Typewriter\", \"DejaVu Sans Mono\", \"Bitstream Vera Sans Mono\", \"Liberation Mono\", \"Nimbus Mono L\", \"Courier New\", Courier, monospace',\n    fontSize: '14px',\n    lineHeight: '1.375',\n    direction: 'ltr',\n    textAlign: 'left',\n    whiteSpace: 'pre',\n    wordSpacing: 'normal',\n    wordBreak: 'normal',\n    MozTabSize: '4',\n    OTabSize: '4',\n    tabSize: '4',\n    WebkitHyphens: 'none',\n    MozHyphens: 'none',\n    msHyphens: 'none',\n    hyphens: 'none',\n    background: '#2a2734',\n    color: '#5DFAFC', // D\n  },\n  'pre[class*=\"language-\"]': {\n    fontFamily:\n      'Consolas, Menlo, Monaco, \"Andale Mono WT\", \"Andale Mono\", \"Lucida Console\", \"Lucida Sans Typewriter\", \"DejaVu Sans Mono\", \"Bitstream Vera Sans Mono\", \"Liberation Mono\", \"Nimbus Mono L\", \"Courier New\", Courier, monospace',\n    fontSize: '14px',\n    lineHeight: '1.375',\n    direction: 'ltr',\n    textAlign: 'left',\n    whiteSpace: 'pre',\n    wordSpacing: 'normal',\n    wordBreak: 'normal',\n    MozTabSize: '4',\n    OTabSize: '4',\n    tabSize: '4',\n    WebkitHyphens: 'none',\n    MozHyphens: 'none',\n    msHyphens: 'none',\n    hyphens: 'none',\n    background: '#2a2734',\n    color: '#5DFAFC', // D\n    padding: '1em',\n    margin: '.5em 0',\n    overflow: 'auto',\n  },\n  'pre > code[class*=\"language-\"]': {\n    fontSize: '1em',\n  },\n  'pre[class*=\"language-\"]::-moz-selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'pre[class*=\"language-\"] ::-moz-selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'code[class*=\"language-\"]::-moz-selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'code[class*=\"language-\"] ::-moz-selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'pre[class*=\"language-\"]::selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'pre[class*=\"language-\"] ::selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'code[class*=\"language-\"]::selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  'code[class*=\"language-\"] ::selection': {\n    textShadow: 'none',\n    background: '#6a51e6',\n  },\n  ':not(pre) > code[class*=\"language-\"]': {\n    padding: '.1em',\n    borderRadius: '.3em',\n  },\n  comment: {\n    color: '#6c6783',\n  },\n  prolog: {\n    color: '#6c6783',\n  },\n  doctype: {\n    color: '#6c6783',\n  },\n  cdata: {\n    color: '#6c6783',\n  },\n  punctuation: {\n    color: '#6c6783',\n  },\n  namespace: {\n    Opacity: '.7',\n  },\n  tag: {\n    color: '#3AACE2', // D\n  },\n  operator: {\n    color: '#3AACE2', // D\n  },\n  number: {\n    color: '#3AACE2', // D\n  },\n  property: {\n    color: '#5DFAFC', // D\n  },\n  function: {\n    color: '#5DFAFC', // D\n  },\n  'tag-id': {\n    color: '#eeebff',\n  },\n  selector: {\n    color: '#eeebff',\n  },\n  'atrule-id': {\n    color: '#eeebff',\n  },\n  'code.language-javascript': {\n    color: '#c4b9fe',\n  },\n  'attr-name': {\n    color: '#c4b9fe',\n  },\n  'code.language-css': {\n    color: '#ffffff', // D\n  },\n  'code.language-scss': {\n    color: '#ffffff', // D\n  },\n  boolean: {\n    color: '#ffffff', // D\n  },\n  string: {\n    color: '#ffffff', // D\n  },\n  entity: {\n    color: '#ffffff', // D\n    cursor: 'help',\n  },\n  url: {\n    color: '#ffffff', // D\n  },\n  '.language-css .token.string': {\n    color: '#ffffff', // D\n  },\n  '.language-scss .token.string': {\n    color: '#ffffff', // D\n  },\n  '.style .token.string': {\n    color: '#ffffff', // D\n  },\n  'attr-value': {\n    color: '#ffffff', // D\n  },\n  keyword: {\n    color: '#ffffff', // D\n  },\n  control: {\n    color: '#ffffff', // D\n  },\n  directive: {\n    color: '#ffffff', // D\n  },\n  unit: {\n    color: '#ffffff', // D\n  },\n  statement: {\n    color: '#ffffff', // D\n  },\n  regex: {\n    color: '#ffffff', // D\n  },\n  atrule: {\n    color: '#ffffff', // D\n  },\n  placeholder: {\n    color: '#ffffff', // D\n  },\n  variable: {\n    color: '#ffffff', // D\n  },\n  deleted: {\n    textDecoration: 'line-through',\n  },\n  inserted: {\n    borderBottom: '1px dotted #eeebff',\n    textDecoration: 'none',\n  },\n  italic: {\n    fontStyle: 'italic',\n  },\n  important: {\n    fontWeight: 'bold',\n    color: '#c4b9fe',\n  },\n  bold: {\n    fontWeight: 'bold',\n  },\n  'pre > code.highlight': {\n    Outline: '.4em solid #8a75f5',\n    OutlineOffset: '.4em',\n  },\n  '.line-numbers.line-numbers .line-numbers-rows': {\n    borderRightColor: '#2c2937',\n  },\n  '.line-numbers .line-numbers-rows > span:before': {\n    color: '#3c3949',\n  },\n  '.line-highlight.line-highlight': {\n    background: 'linear-gradient(to right, rgba(224, 145, 66, 0.2) 70%, rgba(224, 145, 66, 0))',\n  },\n};\n\nexport default databricksDuotoneDarkTheme;\n","import type { Dispatch } from 'react';\nimport { useCallback, useState } from 'react';\n\nimport { LegacySelect, useDesignSystemTheme } from '@databricks/design-system';\n\nimport { AliasTag } from './AliasTag';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\n/**\n * A specialized <LegacySelect> component used for adding and removing aliases from model versions\n */\nexport const AliasSelect = ({\n  renderKey,\n  setDraftAliases,\n  existingAliases,\n  draftAliases,\n  version,\n  aliasToVersionMap,\n  disabled,\n}: {\n  renderKey: any;\n  disabled: boolean;\n  setDraftAliases: Dispatch<React.SetStateAction<string[]>>;\n  existingAliases: string[];\n  draftAliases: string[];\n  version: string;\n  aliasToVersionMap: Record<string, string>;\n}) => {\n  const intl = useIntl();\n  const [dropdownVisible, setDropdownVisible] = useState(false);\n\n  const { theme } = useDesignSystemTheme();\n\n  const removeFromEditedAliases = useCallback(\n    (alias: string) => {\n      setDraftAliases((aliases) => aliases.filter((existingAlias) => existingAlias !== alias));\n    },\n    [setDraftAliases],\n  );\n\n  const updateEditedAliases = useCallback(\n    (aliases: string[]) => {\n      const sanitizedAliases = aliases\n        // Remove all characters that are not alphanumeric, underscores or hyphens\n        .map((alias) =>\n          alias\n            .replace(/[^\\w-]/g, '')\n            .toLowerCase()\n            .substring(0, 255),\n        )\n        // After sanitization, filter out invalid aliases\n        // so we won't get empty values\n        .filter((alias) => alias.length > 0);\n\n      // Remove duplicates that might result from varying letter case\n      const uniqueAliases = Array.from(new Set(sanitizedAliases));\n      setDraftAliases(uniqueAliases);\n      setDropdownVisible(false);\n    },\n    [setDraftAliases],\n  );\n\n  return (\n    // For the time being, we will use <LegacySelect /> under the hood,\n    // while <TypeaheadCombobox /> is still in the design phase.\n    <LegacySelect\n      disabled={disabled}\n      filterOption={(val, opt) => opt?.value.toLowerCase().startsWith(val.toLowerCase())}\n      placeholder={intl.formatMessage({\n        defaultMessage: 'Enter aliases (champion, challenger, etc)',\n        description: 'Model registry > model version alias select > Alias input placeholder',\n      })}\n      allowClear\n      css={{ width: '100%' }}\n      mode=\"tags\"\n      // There's a bug with current <LegacySelect /> implementation that causes the dropdown\n      // to detach from input vertically when its position on screen changes (in this case, it's\n      // caused by the conflict alerts). A small key={} hack ensures that the component is recreated\n      // and the dropdown is repositioned each time the alerts below are changed.\n      key={JSON.stringify(renderKey)}\n      onChange={updateEditedAliases}\n      dangerouslySetAntdProps={{\n        dropdownMatchSelectWidth: true,\n        tagRender: ({ value }) => (\n          <AliasTag\n            compact\n            css={{ marginTop: 2 }}\n            closable\n            onClose={() => removeFromEditedAliases(value.toString())}\n            value={value.toString()}\n          />\n        ),\n      }}\n      onDropdownVisibleChange={setDropdownVisible}\n      open={dropdownVisible}\n      value={draftAliases || []}\n    >\n      {existingAliases.map((alias) => (\n        <LegacySelect.Option key={alias} value={alias} data-testid=\"model-alias-option\">\n          <div key={alias} css={{ display: 'flex', marginRight: theme.spacing.xs }}>\n            <div css={{ flex: 1 }}>{alias}</div>\n            <div>\n              <FormattedMessage\n                defaultMessage=\"This version\"\n                description=\"Model registry > model version alias select > Indicator for alias of selected version\"\n              />\n            </div>\n          </div>\n        </LegacySelect.Option>\n      ))}\n      {Object.entries(aliasToVersionMap)\n        .filter(([, otherVersion]) => otherVersion !== version)\n        .map(([alias, aliasedVersion]) => (\n          <LegacySelect.Option key={alias} value={alias} data-testid=\"model-alias-option\">\n            <div key={alias} css={{ display: 'flex', marginRight: theme.spacing.xs }}>\n              <div css={{ flex: 1 }}>{alias}</div>\n              <div>\n                <FormattedMessage\n                  defaultMessage=\"Version {version}\"\n                  description=\"Model registry > model version alias select > Indicator for alias of a particular version\"\n                  values={{ version: aliasedVersion }}\n                />\n              </div>\n            </div>\n          </LegacySelect.Option>\n        ))}\n    </LegacySelect>\n  );\n};\n","import { isEqual } from 'lodash';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { Alert, Button, LegacyForm, Modal, useDesignSystemTheme } from '@databricks/design-system';\nimport { Typography } from '@databricks/design-system';\nimport { AliasSelect } from '../components/AliasSelect';\nimport { FormattedMessage } from 'react-intl';\n\nimport { ErrorWrapper } from '../utils/ErrorWrapper';\nimport type { AliasMap } from '../types';\n\nconst MAX_ALIASES_PER_MODEL_VERSION = 10;\n\n/**\n * Provides methods to initialize and display modal used to add and remove aliases from the model version\n */\nexport const useEditAliasesModal = ({\n  aliases,\n  onSuccess,\n  onSave,\n  getTitle,\n  description,\n}: {\n  aliases: AliasMap;\n  onSuccess?: () => void;\n  onSave: (currentlyEditedVersion: string, existingAliases: string[], draftAliases: string[]) => Promise<any>;\n  getTitle: (version: string) => React.ReactNode;\n  description?: React.ReactNode;\n}) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [form] = LegacyForm.useForm();\n\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const { theme } = useDesignSystemTheme();\n\n  // We will keep version's existing aliases in `existingAliases` state array\n  const [existingAliases, setExistingAliases] = useState<string[]>([]);\n  // Currently edited aliases will be kept in `draftAliases` state array\n  const [draftAliases, setDraftAliases] = useState<string[]>([]);\n  // Currently edited version\n  const [currentlyEditedVersion, setCurrentlyEditedVersion] = useState<string>('0');\n\n  /**\n   * Function used to invoke the modal and start editing aliases of the particular model version\n   */\n  const showEditAliasesModal = useCallback(\n    (versionNumber: string) => {\n      const modelVersionAliases =\n        aliases.filter(({ version }) => version === versionNumber).map(({ alias }) => alias) || [];\n\n      if (versionNumber) {\n        setExistingAliases(modelVersionAliases);\n        setDraftAliases(modelVersionAliases);\n        setCurrentlyEditedVersion(versionNumber);\n        setShowModal(true);\n      }\n    },\n    [aliases],\n  );\n\n  // // Finds and stores alias values found in other model versions\n  const conflictedAliases = useMemo(() => {\n    const versionsWithAliases = aliases.reduce<{ version: string; aliases: string[] }[]>((aliasMap, aliasEntry) => {\n      if (!aliasMap.some(({ version }) => version === aliasEntry.version)) {\n        return [...aliasMap, { version: aliasEntry.version, aliases: [aliasEntry.alias] }];\n      }\n      aliasMap.find(({ version }) => version === aliasEntry.version)?.aliases.push(aliasEntry.alias);\n      return aliasMap;\n    }, []);\n    const otherVersionMappings = versionsWithAliases.filter(\n      ({ version: otherVersion }) => otherVersion !== currentlyEditedVersion,\n    );\n    return draftAliases\n      .map((alias) => ({\n        alias,\n        otherVersion: otherVersionMappings.find((version) =>\n          version.aliases?.find((alias_name) => alias_name === alias),\n        ),\n      }))\n      .filter(({ otherVersion }) => otherVersion);\n  }, [aliases, draftAliases, currentlyEditedVersion]);\n\n  // Maps particular aliases to versions\n  const aliasToVersionMap = useMemo(\n    () =>\n      aliases.reduce<Record<string, string>>((result, { alias, version }) => {\n        return { ...result, [alias]: version };\n      }, {}) || {},\n    [aliases],\n  );\n\n  const save = () => {\n    setErrorMessage('');\n    setIsLoading(true);\n    onSave(currentlyEditedVersion, existingAliases, draftAliases)\n      .then(() => {\n        setIsLoading(false);\n        setShowModal(false);\n        onSuccess?.();\n      })\n      .catch((e: ErrorWrapper | Error) => {\n        setIsLoading(false);\n        if (e instanceof ErrorWrapper) {\n          const extractedErrorMessage = e.getMessageField() || e.getUserVisibleError().toString() || e.text;\n          setErrorMessage(extractedErrorMessage);\n        } else {\n          setErrorMessage(e.message);\n        }\n      });\n  };\n\n  // Indicates if there is any pending change to the alias set\n  const isPristine = isEqual(existingAliases.slice().sort(), draftAliases.slice().sort());\n  const isExceedingLimit = draftAliases.length > MAX_ALIASES_PER_MODEL_VERSION;\n\n  const isInvalid = isPristine || isExceedingLimit;\n\n  const EditAliasesModal = (\n    <Modal\n      componentId=\"mlflow.edit-aliases-modal\"\n      visible={showModal}\n      footer={\n        <div>\n          <Button componentId=\"mlflow.edit-aliases-modal.cancel-button\" onClick={() => setShowModal(false)}>\n            <FormattedMessage defaultMessage=\"Cancel\" description=\"Alias editor > Cancel editing aliases\" />\n          </Button>\n          <Button\n            componentId=\"mlflow.edit-aliases-modal.save-button\"\n            loading={isLoading}\n            type=\"primary\"\n            disabled={isInvalid}\n            onClick={save}\n          >\n            <FormattedMessage defaultMessage=\"Save aliases\" description=\"Alias editor > Confirm change of aliases\" />\n          </Button>\n        </div>\n      }\n      destroyOnClose\n      title={getTitle(currentlyEditedVersion)}\n      onCancel={() => setShowModal(false)}\n      confirmLoading={false}\n    >\n      <Typography.Paragraph>{description}</Typography.Paragraph>\n      <LegacyForm form={form} layout=\"vertical\">\n        <LegacyForm.Item>\n          <AliasSelect\n            disabled={false}\n            renderKey={conflictedAliases} // todo\n            aliasToVersionMap={aliasToVersionMap}\n            version={currentlyEditedVersion}\n            draftAliases={draftAliases}\n            existingAliases={existingAliases}\n            setDraftAliases={setDraftAliases}\n          />\n        </LegacyForm.Item>\n        <div css={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.xs }}>\n          {isExceedingLimit && (\n            <Alert\n              componentId=\"mlflow.edit-aliases-modal.exceeding-limit-alert\"\n              role=\"alert\"\n              message={\n                <FormattedMessage\n                  defaultMessage=\"You are exceeding a limit of {limit} aliases assigned to the single model version\"\n                  description=\"Alias editor > Warning about exceeding aliases limit\"\n                  values={{ limit: MAX_ALIASES_PER_MODEL_VERSION }}\n                />\n              }\n              type=\"error\"\n              closable={false}\n            />\n          )}\n          {conflictedAliases.map(({ alias, otherVersion }) => (\n            <Alert\n              componentId=\"mlflow.edit-aliases-modal.conflicted-alias-alert\"\n              role=\"alert\"\n              key={alias}\n              message={\n                <FormattedMessage\n                  defaultMessage='The \"{alias}\" alias is also being used on version {otherVersion}. Adding it to this version will remove it from version {otherVersion}.'\n                  description=\"Alias editor > Warning about reusing alias from the other version\"\n                  values={{ otherVersion: otherVersion?.version, alias }}\n                />\n              }\n              type=\"info\"\n              closable={false}\n            />\n          ))}\n          {errorMessage && (\n            <Alert\n              componentId=\"mlflow.edit-aliases-modal.error-alert\"\n              role=\"alert\"\n              message={errorMessage}\n              type=\"error\"\n              closable={false}\n            />\n          )}\n        </div>\n      </LegacyForm>\n    </Modal>\n  );\n\n  return { EditAliasesModal, showEditAliasesModal };\n};\n","import React from 'react';\n\nimport type { ButtonProps, TooltipProps } from '@databricks/design-system';\nimport { Button, Tooltip } from '@databricks/design-system';\n\nimport { useCopyController } from './useCopyController';\n\nexport interface CopyActionButtonProps {\n  buttonProps?: Partial<ButtonProps>;\n  componentId?: string;\n  copyText: string;\n  copyTooltip?: string;\n  isInsideInputGroup?: boolean;\n  onCopy?: () => void;\n  tooltipProps?: Partial<TooltipProps>;\n}\n\nexport function CopyActionButton({\n  buttonProps,\n  componentId,\n  copyText,\n  copyTooltip,\n  isInsideInputGroup = false,\n  onCopy,\n  tooltipProps,\n}: CopyActionButtonProps) {\n  const { actionIcon, copy, handleTooltipOpenChange, tooltipOpen, tooltipMessage } = useCopyController(\n    copyText,\n    copyTooltip,\n    onCopy,\n  );\n\n  const button = (\n    <Button\n      aria-label={tooltipMessage}\n      componentId={componentId ?? 'codegen_web-shared_src_copy_copyactionbutton.tsx_17'}\n      icon={actionIcon}\n      onClick={copy}\n      size=\"small\"\n      {...buttonProps}\n    />\n  );\n\n  const inputGroupButton = (\n    <Button\n      aria-label={tooltipMessage}\n      componentId={componentId ?? 'codegen_web-shared_src_copy_copyactionbutton.tsx_17'}\n      onClick={copy}\n      {...buttonProps}\n    >\n      {actionIcon}\n    </Button>\n  );\n\n  return (\n    <Tooltip\n      componentId={\n        componentId ? `${componentId}-tooltip` : 'codegen_web-shared_src_copy_copyactionbutton.tsx_17-tooltip'\n      }\n      content={tooltipMessage}\n      onOpenChange={handleTooltipOpenChange}\n      open={tooltipOpen}\n      {...tooltipProps}\n    >\n      {isInsideInputGroup ? inputGroupButton : button}\n    </Tooltip>\n  );\n}\n","import React from 'react';\nimport { CopyIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { CodeSnippet } from '@databricks/web-shared/snippet';\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\n\nexport const ShowArtifactCodeSnippet = ({ code }: { code: string }): React.ReactElement => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <div css={{ position: 'relative' }}>\n      <CopyButton\n        css={{ zIndex: 1, position: 'absolute', top: theme.spacing.xs, right: theme.spacing.xs }}\n        showLabel={false}\n        copyText={code}\n        icon={<CopyIcon />}\n      />\n      <CodeSnippet\n        language=\"python\"\n        showLineNumbers={false}\n        style={{\n          padding: theme.spacing.sm,\n          color: theme.colors.textPrimary,\n          backgroundColor: theme.colors.backgroundSecondary,\n          whiteSpace: 'pre-wrap',\n        }}\n        wrapLongLines\n      >\n        {code}\n      </CodeSnippet>\n    </div>\n  );\n};\n","import type { ReactElement } from 'react';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useClipboard } from 'use-clipboard-copy';\n\nimport { CheckIcon, CopyIcon } from '@databricks/design-system';\nimport { useIntl } from '@databricks/i18n';\n\nexport interface CopyController {\n  actionIcon: ReactElement;\n  tooltipMessage: string;\n  copy: () => void;\n  copied: boolean;\n  ariaLabel: string;\n  tooltipOpen: boolean;\n  handleTooltipOpenChange: (open: boolean) => void;\n}\n\n/**\n * Utility hook that is internal to web-shared, use: `Copyable` or `CopyActionButton`\n *  or if it's a `CodeSnippet`, `SnippetCopyAction`\n */\nexport function useCopyController(text: string, copyTooltip?: string, onCopy?: () => void): CopyController {\n  const intl = useIntl();\n\n  const copyMessage = copyTooltip\n    ? copyTooltip\n    : intl.formatMessage({\n        defaultMessage: 'Copy',\n        description: 'Tooltip message displayed on copy action',\n      });\n\n  const copiedMessage = intl.formatMessage({\n    defaultMessage: 'Copied',\n    description: 'Tooltip message displayed on copy action after it has been clicked',\n  });\n\n  const clipboard = useClipboard();\n  const copiedTimerIdRef = useRef<number>();\n  const [copied, setCopied] = useState(false);\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      window.clearTimeout(copiedTimerIdRef.current);\n    };\n  }, []);\n\n  const copy = () => {\n    clipboard.copy(text);\n    window.clearTimeout(copiedTimerIdRef.current);\n    setCopied(true);\n    onCopy?.();\n    copiedTimerIdRef.current = window.setTimeout(() => {\n      setCopied(false);\n    }, 3000);\n  };\n\n  return {\n    actionIcon: copied ? <CheckIcon /> : <CopyIcon />,\n    tooltipMessage: copied ? copiedMessage : copyMessage,\n    copy,\n    copied,\n    ariaLabel: copyMessage,\n    tooltipOpen: open || copied,\n    handleTooltipOpenChange: setOpen,\n  };\n}\n","/**\n * Adapted from `material-light`\n * Ref: https://github.com/react-syntax-highlighter/react-syntax-highlighter/blob/b2457268891948f7005ccf539a70c000f0695bde/src/styles/prism/material-light.js#L1\n *\n * This theme overwrites colors to be similiar to the `@databricks/editor` theme.\n */\n\nconst databricksLightTheme = {\n  'code[class*=\"language-\"]': {\n    textAlign: 'left',\n    whiteSpace: 'pre',\n    wordSpacing: 'normal',\n    wordBreak: 'normal',\n    wordWrap: 'normal',\n    color: 'rgb(77, 77, 76)', // D\n    background: '#fafafa',\n    fontFamily: 'Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace',\n    fontSize: '12px', // D\n    lineHeight: '1.5em',\n    MozTabSize: '4',\n    OTabSize: '4',\n    tabSize: '4',\n    WebkitHyphens: 'none',\n    MozHyphens: 'none',\n    msHyphens: 'none',\n    hyphens: 'none',\n  },\n  'pre[class*=\"language-\"]': {\n    textAlign: 'left',\n    whiteSpace: 'pre',\n    wordSpacing: 'normal',\n    wordBreak: 'normal',\n    wordWrap: 'normal',\n    color: 'rgb(77, 77, 76)', // D\n    background: '#fafafa',\n    fontFamily: 'Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace',\n    fontSize: '12px', // D\n    lineHeight: '1.5em',\n    MozTabSize: '4',\n    OTabSize: '4',\n    tabSize: '4',\n    WebkitHyphens: 'none',\n    MozHyphens: 'none',\n    msHyphens: 'none',\n    hyphens: 'none',\n    overflow: 'auto',\n    position: 'relative',\n    margin: '0.5em 0',\n    padding: '1.25em 1em',\n  },\n  'code[class*=\"language-\"]::-moz-selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'pre[class*=\"language-\"]::-moz-selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'code[class*=\"language-\"] ::-moz-selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'pre[class*=\"language-\"] ::-moz-selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'code[class*=\"language-\"]::selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'pre[class*=\"language-\"]::selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'code[class*=\"language-\"] ::selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  'pre[class*=\"language-\"] ::selection': {\n    background: '#cceae7',\n    color: '#263238',\n  },\n  ':not(pre) > code[class*=\"language-\"]': {\n    whiteSpace: 'normal',\n    borderRadius: '0.2em',\n    padding: '0.1em',\n  },\n  '.language-css > code': {\n    color: '#f5871f', // D\n  },\n  '.language-sass > code': {\n    color: '#f5871f', // D\n  },\n  '.language-scss > code': {\n    color: '#f5871f', // D\n  },\n  '[class*=\"language-\"] .namespace': {\n    Opacity: '0.7',\n  },\n  atrule: {\n    color: '#7c4dff',\n  },\n  'attr-name': {\n    color: '#39adb5',\n  },\n  'attr-value': {\n    color: '#f6a434',\n  },\n  attribute: {\n    color: '#f6a434',\n  },\n  boolean: {\n    color: '#7c4dff', // D\n  },\n  builtin: {\n    color: '#39adb5',\n  },\n  cdata: {\n    color: '#39adb5',\n  },\n  char: {\n    color: '#39adb5',\n  },\n  class: {\n    color: '#39adb5',\n  },\n  'class-name': {\n    color: '#6182b8',\n  },\n  comment: {\n    color: '#8e908c', // D\n  },\n  constant: {\n    color: '#7c4dff', // D\n  },\n  deleted: {\n    color: '#e53935',\n  },\n  doctype: {\n    color: '#aabfc9',\n  },\n  entity: {\n    color: '#e53935',\n  },\n  function: {\n    color: '#4271ae', // D\n  },\n  hexcode: {\n    color: '#f5871f', // D\n  },\n  id: {\n    color: '#7c4dff',\n    fontWeight: 'bold',\n  },\n  important: {\n    color: '#7c4dff',\n    fontWeight: 'bold',\n  },\n  inserted: {\n    color: '#39adb5',\n  },\n  keyword: {\n    color: '#8959a8', // D\n  },\n  number: {\n    color: '#f5871f', // D\n  },\n  operator: {\n    color: '#3e999f', // D\n  },\n  prolog: {\n    color: '#aabfc9',\n  },\n  property: {\n    color: '#39adb5',\n  },\n  'pseudo-class': {\n    color: '#f6a434',\n  },\n  'pseudo-element': {\n    color: '#f6a434',\n  },\n  punctuation: {\n    color: 'rgb(77, 77, 76)', // D\n  },\n  regex: {\n    color: '#6182b8',\n  },\n  selector: {\n    color: '#e53935',\n  },\n  string: {\n    color: '#3ba85f', // D\n  },\n  symbol: {\n    color: '#7c4dff',\n  },\n  tag: {\n    color: '#e53935',\n  },\n  unit: {\n    color: '#f5871f', // D\n  },\n  url: {\n    color: '#e53935',\n  },\n  variable: {\n    color: '#c72d4c', // D\n  },\n};\n\nexport default databricksLightTheme;\n","import type { QueryFunctionContext, UseQueryOptions } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { useQuery } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport type { RegisteredPromptDetailsResponse } from '../types';\nimport { RegisteredPromptsApi } from '../api';\n\nconst queryFn = async ({ queryKey }: QueryFunctionContext<PromptDetailsQueryKey>) => {\n  const [, { promptName }] = queryKey;\n  const [detailsResponse, versionsResponse] = await Promise.all([\n    RegisteredPromptsApi.getPromptDetails(promptName),\n    RegisteredPromptsApi.getPromptVersions(promptName),\n  ]);\n\n  return {\n    prompt: detailsResponse.registered_model,\n    versions: versionsResponse.model_versions ?? [],\n  };\n};\n\ntype PromptDetailsQueryKey = ['prompt_details', { promptName: string }];\n\nexport const usePromptDetailsQuery = (\n  { promptName }: { promptName: string },\n  options: UseQueryOptions<\n    RegisteredPromptDetailsResponse,\n    Error,\n    RegisteredPromptDetailsResponse,\n    PromptDetailsQueryKey\n  > = {},\n) => {\n  const queryResult = useQuery<\n    RegisteredPromptDetailsResponse,\n    Error,\n    RegisteredPromptDetailsResponse,\n    PromptDetailsQueryKey\n  >(['prompt_details', { promptName }], {\n    queryFn,\n    retry: false,\n    ...options,\n  });\n\n  return {\n    data: queryResult.data,\n    error: queryResult.error ?? undefined,\n    isLoading: queryResult.isLoading,\n    refetch: queryResult.refetch,\n  };\n};\n","import type { ColumnDef } from '@tanstack/react-table';\nimport { ModelVersionTableAliasesCell } from '../../../../model-registry/components/aliases/ModelVersionTableAliasesCell';\nimport type { RegisteredPromptVersion } from '../types';\nimport type { PromptsVersionsTableMetadata } from '../utils';\n\nexport const PromptVersionsTableAliasesCell: ColumnDef<RegisteredPromptVersion>['cell'] = ({\n  getValue,\n  row: { original },\n  table: {\n    options: { meta },\n  },\n}) => {\n  const { showEditAliasesModal, aliasesByVersion, registeredPrompt } = meta as PromptsVersionsTableMetadata;\n\n  const mvAliases = aliasesByVersion[original.version] || [];\n\n  return registeredPrompt ? (\n    <ModelVersionTableAliasesCell\n      modelName={registeredPrompt?.name}\n      version={original.version}\n      aliases={mvAliases}\n      onAddEdit={() => {\n        showEditAliasesModal?.(original.version);\n      }}\n    />\n  ) : null;\n};\n","import { Tooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\n/**\n * A custom split button to select versions to compare in the prompt details page.\n */\nexport const PromptVersionsDiffSelectorButton = ({\n  isSelectedFirstToCompare,\n  isSelectedSecondToCompare,\n  onSelectFirst,\n  onSelectSecond,\n}: {\n  isSelectedFirstToCompare: boolean;\n  isSelectedSecondToCompare: boolean;\n  onSelectFirst?: () => void;\n  onSelectSecond?: () => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n  return (\n    <div\n      css={{ width: theme.general.buttonHeight, display: 'flex', alignItems: 'center', paddingRight: theme.spacing.sm }}\n    >\n      <div css={{ display: 'flex', height: theme.general.buttonInnerHeight + theme.spacing.xs, gap: 0, flex: 1 }}>\n        <Tooltip\n          componentId=\"mlflow.prompts.details.select_baseline.tooltip\"\n          content={\n            <FormattedMessage\n              defaultMessage=\"Select as baseline version\"\n              description=\"Label for selecting baseline prompt version in the comparison view\"\n            />\n          }\n          delayDuration={0}\n          side=\"left\"\n        >\n          <button\n            onClick={onSelectFirst}\n            role=\"radio\"\n            aria-checked={isSelectedFirstToCompare}\n            aria-label={intl.formatMessage({\n              defaultMessage: 'Select as baseline version',\n              description: 'Label for selecting baseline prompt version in the comparison view',\n            })}\n            css={{\n              flex: 1,\n              border: `1px solid ${\n                isSelectedFirstToCompare\n                  ? theme.colors.actionDefaultBorderFocus\n                  : theme.colors.actionDefaultBorderDefault\n              }`,\n              borderRight: 0,\n              marginLeft: 1,\n              borderTopLeftRadius: theme.borders.borderRadiusMd,\n              borderBottomLeftRadius: theme.borders.borderRadiusMd,\n              backgroundColor: isSelectedFirstToCompare\n                ? theme.colors.actionDefaultBackgroundPress\n                : theme.colors.actionDefaultBackgroundDefault,\n              cursor: 'pointer',\n              '&:hover': {\n                backgroundColor: theme.colors.actionDefaultBackgroundHover,\n              },\n            }}\n          />\n        </Tooltip>\n        <Tooltip\n          componentId=\"mlflow.prompts.details.select_compared.tooltip\"\n          content={\n            <FormattedMessage\n              defaultMessage=\"Select as compared version\"\n              description=\"Label for selecting compared prompt version in the comparison view\"\n            />\n          }\n          delayDuration={0}\n          side=\"right\"\n        >\n          <button\n            onClick={onSelectSecond}\n            role=\"radio\"\n            aria-checked={isSelectedSecondToCompare}\n            aria-label={intl.formatMessage({\n              defaultMessage: 'Select as compared version',\n              description: 'Label for selecting compared prompt version in the comparison view',\n            })}\n            css={{\n              flex: 1,\n              border: `1px solid ${\n                isSelectedSecondToCompare\n                  ? theme.colors.actionDefaultBorderFocus\n                  : theme.colors.actionDefaultBorderDefault\n              }`,\n              borderLeft: `1px solid ${\n                isSelectedFirstToCompare || isSelectedSecondToCompare\n                  ? theme.colors.actionDefaultBorderFocus\n                  : theme.colors.actionDefaultBorderDefault\n              }`,\n              borderTopRightRadius: theme.borders.borderRadiusMd,\n              borderBottomRightRadius: theme.borders.borderRadiusMd,\n              backgroundColor: isSelectedSecondToCompare\n                ? theme.colors.actionDefaultBackgroundPress\n                : theme.colors.actionDefaultBackgroundDefault,\n              cursor: 'pointer',\n              '&:hover': {\n                backgroundColor: theme.colors.actionDefaultBackgroundHover,\n              },\n            }}\n          />\n        </Tooltip>\n      </div>\n    </div>\n  );\n};\n","import {\n  ChevronRightIcon,\n  Empty,\n  Table,\n  TableCell,\n  TableHeader,\n  TableRow,\n  TableSkeletonRows,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport type { ColumnDef } from '@tanstack/react-table';\nimport { flexRender, getCoreRowModel, useReactTable } from '@tanstack/react-table';\nimport { useMemo } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport Utils from '../../../../common/utils/Utils';\nimport { ModelVersionTableAliasesCell } from '../../../../model-registry/components/aliases/ModelVersionTableAliasesCell';\nimport type { RegisteredPrompt, RegisteredPromptVersion } from '../types';\nimport { PromptVersionsTableMode } from '../utils';\nimport { PromptsListTableVersionCell } from './PromptsListTableVersionCell';\nimport { PromptVersionsTableAliasesCell } from './PromptVersionsTableAliasesCell';\nimport { PromptVersionsDiffSelectorButton } from './PromptVersionsDiffSelectorButton';\n\ntype PromptVersionsTableColumnDef = ColumnDef<RegisteredPromptVersion>;\n\nexport const PromptVersionsTable = ({\n  promptVersions,\n  onUpdateComparedVersion,\n  isLoading,\n  onUpdateSelectedVersion,\n  comparedVersion,\n  selectedVersion,\n  mode,\n  registeredPrompt,\n  showEditAliasesModal,\n  aliasesByVersion,\n}: {\n  promptVersions?: RegisteredPromptVersion[];\n  isLoading: boolean;\n  selectedVersion?: string;\n  comparedVersion?: string;\n  onUpdateSelectedVersion: (version: string) => void;\n  onUpdateComparedVersion: (version: string) => void;\n  mode: PromptVersionsTableMode;\n  registeredPrompt?: RegisteredPrompt;\n  showEditAliasesModal?: (versionNumber: string) => void;\n  aliasesByVersion: Record<string, string[]>;\n}) => {\n  const intl = useIntl();\n\n  const { theme } = useDesignSystemTheme();\n  const columns = useMemo(() => {\n    const resultColumns: PromptVersionsTableColumnDef[] = [\n      {\n        id: 'version',\n        header: intl.formatMessage({\n          defaultMessage: 'Version',\n          description: 'Header for the version column in the registered prompts table',\n        }),\n        accessorKey: 'version',\n        cell: PromptsListTableVersionCell,\n      },\n    ];\n\n    if (mode === PromptVersionsTableMode.TABLE) {\n      resultColumns.push({\n        id: 'creation_timestamp',\n        header: intl.formatMessage({\n          defaultMessage: 'Registered at',\n          description: 'Header for the registration time column in the registered prompts table',\n        }),\n        accessorFn: ({ creation_timestamp }) => Utils.formatTimestamp(creation_timestamp, intl),\n      });\n\n      resultColumns.push({\n        id: 'commit_message',\n        header: intl.formatMessage({\n          defaultMessage: 'Commit message',\n          description: 'Header for the commit message column in the registered prompts table',\n        }),\n        accessorKey: 'description',\n      });\n      resultColumns.push({\n        id: 'aliases',\n        header: intl.formatMessage({\n          defaultMessage: 'Aliases',\n          description: 'Header for the aliases column in the registered prompts table',\n        }),\n        accessorKey: 'aliases',\n        cell: PromptVersionsTableAliasesCell,\n      });\n    }\n\n    return resultColumns;\n  }, [mode, intl]);\n\n  const table = useReactTable({\n    data: promptVersions ?? [],\n    getRowId: (row) => row.version,\n    columns,\n    getCoreRowModel: getCoreRowModel(),\n    meta: { showEditAliasesModal, aliasesByVersion, registeredPrompt },\n  });\n\n  const getEmptyState = () => {\n    if (!isLoading && promptVersions?.length === 0) {\n      return (\n        <Empty\n          title={\n            <FormattedMessage\n              defaultMessage=\"No prompt versions created\"\n              description=\"A header for the empty state in the prompt versions table\"\n            />\n          }\n          description={\n            <FormattedMessage\n              defaultMessage='Use \"Create prompt version\" button in order to create a new prompt version'\n              description=\"Guidelines for the user on how to create a new prompt version in the prompt versions table\"\n            />\n          }\n        />\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div css={{ flex: 1, overflow: 'hidden' }}>\n      <Table scrollable empty={getEmptyState()} aria-label=\"Prompt versions table\">\n        <TableRow isHeader>\n          {table.getLeafHeaders().map((header) => (\n            <TableHeader componentId=\"mlflow.prompts.versions.table.header\" key={header.id}>\n              {flexRender(header.column.columnDef.header, header.getContext())}\n            </TableHeader>\n          ))}\n        </TableRow>\n        {isLoading ? (\n          <TableSkeletonRows table={table} />\n        ) : (\n          table.getRowModel().rows.map((row) => {\n            const isSelectedSingle =\n              [PromptVersionsTableMode.PREVIEW].includes(mode) && selectedVersion === row.original.version;\n\n            const isSelectedFirstToCompare =\n              [PromptVersionsTableMode.COMPARE].includes(mode) && selectedVersion === row.original.version;\n\n            const isSelectedSecondToCompare =\n              [PromptVersionsTableMode.COMPARE].includes(mode) && comparedVersion === row.original.version;\n\n            const getColor = () => {\n              if (isSelectedSingle) {\n                return theme.colors.actionDefaultBackgroundPress;\n              } else if (isSelectedFirstToCompare) {\n                return theme.colors.actionDefaultBackgroundHover;\n              } else if (isSelectedSecondToCompare) {\n                return theme.colors.actionDefaultBackgroundHover;\n              }\n              return 'transparent';\n            };\n\n            const showCursorForEntireRow = mode === PromptVersionsTableMode.PREVIEW;\n            return (\n              <TableRow\n                key={row.id}\n                css={{\n                  height: theme.general.heightBase,\n                  backgroundColor: getColor(),\n                  cursor: showCursorForEntireRow ? 'pointer' : 'default',\n                }}\n                onClick={() => {\n                  if (mode !== PromptVersionsTableMode.PREVIEW) {\n                    return;\n                  }\n                  onUpdateSelectedVersion(row.original.version);\n                }}\n              >\n                {row.getAllCells().map((cell) => (\n                  <TableCell key={cell.id} css={{ alignItems: 'center' }}>\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                  </TableCell>\n                ))}\n                {isSelectedSingle && (\n                  <div\n                    css={{\n                      width: theme.spacing.md * 2,\n                      display: 'flex',\n                      alignItems: 'center',\n                      paddingRight: theme.spacing.sm,\n                    }}\n                  >\n                    <ChevronRightIcon />\n                  </div>\n                )}\n                {mode === PromptVersionsTableMode.COMPARE && (\n                  <PromptVersionsDiffSelectorButton\n                    onSelectFirst={() => onUpdateSelectedVersion(row.original.version)}\n                    onSelectSecond={() => onUpdateComparedVersion(row.original.version)}\n                    isSelectedFirstToCompare={isSelectedFirstToCompare}\n                    isSelectedSecondToCompare={isSelectedSecondToCompare}\n                  />\n                )}\n              </TableRow>\n            );\n          })\n        )}\n      </Table>\n    </div>\n  );\n};\n","import { useCallback, useReducer } from 'react';\nimport { PromptVersionsTableMode } from '../utils';\nimport { first } from 'lodash';\nimport type { RegisteredPromptDetailsResponse } from '../types';\n\nconst promptDetailsViewStateReducer = (\n  state: {\n    mode: PromptVersionsTableMode;\n    selectedVersion?: string;\n    comparedVersion?: string;\n  },\n  action:\n    | { type: 'setTableMode' }\n    | { type: 'switchSides' }\n    | { type: 'setPreviewMode'; selectedVersion?: string }\n    | { type: 'setCompareMode'; selectedVersion?: string; comparedVersion?: string }\n    | { type: 'setSelectedVersion'; selectedVersion: string }\n    | { type: 'setComparedVersion'; comparedVersion: string },\n) => {\n  if (action.type === 'setTableMode') {\n    return { ...state, mode: PromptVersionsTableMode.TABLE };\n  }\n  if (action.type === 'switchSides') {\n    return { ...state, selectedVersion: state.comparedVersion, comparedVersion: state.selectedVersion };\n  }\n  if (action.type === 'setPreviewMode') {\n    return { ...state, mode: PromptVersionsTableMode.PREVIEW, selectedVersion: action.selectedVersion };\n  }\n  if (action.type === 'setCompareMode') {\n    return {\n      ...state,\n      mode: PromptVersionsTableMode.COMPARE,\n      selectedVersion: action.selectedVersion,\n      comparedVersion: action.comparedVersion,\n    };\n  }\n  if (action.type === 'setSelectedVersion') {\n    return { ...state, selectedVersion: action.selectedVersion };\n  }\n  if (action.type === 'setComparedVersion') {\n    return { ...state, comparedVersion: action.comparedVersion };\n  }\n  return state;\n};\n\nexport const usePromptDetailsPageViewState = (promptDetailsData?: RegisteredPromptDetailsResponse) => {\n  const [viewState, dispatchViewMode] = useReducer(promptDetailsViewStateReducer, {\n    mode: PromptVersionsTableMode.PREVIEW,\n  });\n\n  const setTableMode = useCallback(() => {\n    dispatchViewMode({ type: 'setTableMode' });\n  }, []);\n  const setPreviewMode = useCallback(\n    (versionEntity?: { version: string }) => {\n      const firstVersion = (versionEntity ?? first(promptDetailsData?.versions))?.version;\n      dispatchViewMode({ type: 'setPreviewMode', selectedVersion: firstVersion });\n    },\n    [promptDetailsData],\n  );\n  const setSelectedVersion = useCallback((selectedVersion: string) => {\n    dispatchViewMode({ type: 'setSelectedVersion', selectedVersion });\n  }, []);\n  const setComparedVersion = useCallback((comparedVersion: string) => {\n    dispatchViewMode({ type: 'setComparedVersion', comparedVersion });\n  }, []);\n  const setCompareMode = useCallback(() => {\n    // Last (highest) version will be the compared version\n    const comparedVersion = first(promptDetailsData?.versions)?.version;\n    // The one immediately before the last version will be the baseline version\n    const baselineVersion = promptDetailsData?.versions[1]?.version;\n    dispatchViewMode({ type: 'setCompareMode', selectedVersion: baselineVersion, comparedVersion });\n  }, [promptDetailsData]);\n\n  const switchSides = useCallback(() => dispatchViewMode({ type: 'switchSides' }), []);\n\n  if (\n    first(promptDetailsData?.versions) &&\n    viewState.mode === PromptVersionsTableMode.PREVIEW &&\n    !viewState.selectedVersion\n  ) {\n    setPreviewMode(first(promptDetailsData?.versions));\n  }\n\n  return {\n    viewState,\n    setTableMode,\n    setPreviewMode,\n    setCompareMode,\n    switchSides,\n    setSelectedVersion,\n    setComparedVersion,\n  };\n};\n","import { useState } from 'react';\nimport { Button, ParagraphSkeleton, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { isNil } from 'lodash';\n\nexport const PromptVersionRuns = ({\n  isLoadingRuns,\n  runIds,\n  runInfoMap,\n}: {\n  isLoadingRuns: boolean;\n  runIds: string[];\n  runInfoMap: Record<string, any>;\n}) => {\n  const [showAll, setShowAll] = useState(false);\n  const { theme } = useDesignSystemTheme();\n\n  const displayThreshold = 3;\n  const visibleCount = showAll ? runIds.length : Math.min(displayThreshold, runIds.length || 0);\n  const hasMore = runIds.length > displayThreshold;\n\n  return (\n    <>\n      <Typography.Text bold>\n        <FormattedMessage\n          defaultMessage=\"MLflow runs:\"\n          description=\"A label for the associated MLflow runs in the prompt details page\"\n        />\n      </Typography.Text>\n\n      <div>\n        {isLoadingRuns ? (\n          <ParagraphSkeleton css={{ width: 100 }} />\n        ) : (\n          <>\n            <div style={{ display: 'flex', flexWrap: 'wrap', gap: theme.spacing.sm }}>\n              {runIds.slice(0, visibleCount).map((runId, index) => {\n                const runInfo = runInfoMap[runId];\n\n                if (!isNil(runInfo?.experimentId) && runInfo?.runUuid && runInfo?.runName) {\n                  const { experimentId, runUuid, runName } = runInfo;\n                  return (\n                    // eslint-disable-next-line react/jsx-key\n                    <Typography.Text>\n                      <Link to={Routes.getRunPageRoute(experimentId, runUuid)}>{runName}</Link>\n                      {index < visibleCount - 1 && ','}\n                    </Typography.Text>\n                  );\n                } else {\n                  // eslint-disable-next-line react/jsx-key\n                  return <span>{runInfo?.runName || runInfo?.runUuid}</span>;\n                }\n              })}\n              {hasMore && (\n                <Button\n                  componentId=\"mlflow.prompts.details.runs.show_more\"\n                  size=\"small\"\n                  type=\"link\"\n                  onClick={() => setShowAll(!showAll)}\n                >\n                  {showAll ? (\n                    <FormattedMessage\n                      defaultMessage=\"Show less\"\n                      description=\"Label for a link that shows less tags when clicked\"\n                    />\n                  ) : (\n                    <FormattedMessage\n                      defaultMessage=\"{count} more...\"\n                      description=\"Label for a link that renders the remaining tags when clicked\"\n                      values={{ count: runIds.length - visibleCount }}\n                    />\n                  )}\n                </Button>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n","import { useState } from 'react';\nimport { Button, PencilIcon, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\n\nimport { KeyValueTag } from '@mlflow/mlflow/src/common/components/KeyValueTag';\nimport type { KeyValueEntity } from '../../../../common/types';\nimport { isNil } from 'lodash';\n\nexport const PromptVersionTags = ({\n  tags,\n  onEditVersionMetadata,\n}: {\n  tags: KeyValueEntity[];\n  onEditVersionMetadata?: () => void;\n}) => {\n  const [showAll, setShowAll] = useState(false);\n  const { theme } = useDesignSystemTheme();\n\n  const displayThreshold = 3;\n  const visibleCount = showAll ? tags.length : Math.min(displayThreshold, tags.length || 0);\n  const hasMore = tags.length > displayThreshold;\n  const shouldAllowEditingMetadata = !isNil(onEditVersionMetadata);\n\n  const editButton =\n    tags.length > 0 ? (\n      <Button\n        componentId=\"mlflow.prompts.details.version.edit_tags\"\n        size=\"small\"\n        icon={<PencilIcon />}\n        onClick={onEditVersionMetadata}\n      />\n    ) : (\n      <Button\n        componentId=\"mlflow.prompts.details.version.add_tags\"\n        size=\"small\"\n        type=\"link\"\n        onClick={onEditVersionMetadata}\n      >\n        <FormattedMessage\n          defaultMessage=\"Add\"\n          description=\"Model registry > model version table > metadata column > 'add' button label\"\n        />\n      </Button>\n    );\n\n  return (\n    <>\n      <Typography.Text bold>\n        <FormattedMessage\n          defaultMessage=\"Metadata:\"\n          description=\"A key-value pair for the metadata in the prompt details page\"\n        />\n      </Typography.Text>\n      <div>\n        <>\n          <div style={{ display: 'flex', flexWrap: 'wrap', gap: theme.spacing.xs }}>\n            {tags.slice(0, visibleCount).map((tag) => (\n              <KeyValueTag css={{ margin: 0 }} key={tag.key} tag={tag} />\n            ))}\n            {shouldAllowEditingMetadata && editButton}\n            {!shouldAllowEditingMetadata && tags.length === 0 && <Typography.Hint></Typography.Hint>}\n            {hasMore && (\n              <Button\n                componentId=\"mlflow.prompts.details.version.tags.show_more\"\n                size=\"small\"\n                type=\"link\"\n                onClick={() => setShowAll(!showAll)}\n              >\n                {showAll ? (\n                  <FormattedMessage\n                    defaultMessage=\"Show less\"\n                    description=\"Label for a link that shows less tags when clicked\"\n                  />\n                ) : (\n                  <FormattedMessage\n                    defaultMessage=\"{count} more...\"\n                    description=\"Label for a link that renders the remaining tags when clicked\"\n                    values={{ count: tags.length - visibleCount }}\n                  />\n                )}\n              </Button>\n            )}\n          </div>\n        </>\n      </div>\n    </>\n  );\n};\n","import { ParagraphSkeleton, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { ModelVersionTableAliasesCell } from '../../../../model-registry/components/aliases/ModelVersionTableAliasesCell';\nimport type { RegisteredPrompt, RegisteredPromptVersion } from '../types';\nimport Utils from '../../../../common/utils/Utils';\nimport { FormattedMessage } from 'react-intl';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { usePromptRunsInfo } from '../hooks/usePromptRunsInfo';\nimport { REGISTERED_PROMPT_SOURCE_RUN_IDS } from '../utils';\nimport { useCallback, useMemo } from 'react';\nimport { PromptVersionRuns } from './PromptVersionRuns';\nimport { isUserFacingTag } from '@mlflow/mlflow/src/common/utils/TagUtils';\nimport { KeyValueTag } from '@mlflow/mlflow/src/common/components/KeyValueTag';\nimport { PromptVersionTags } from './PromptVersionTags';\n\nconst MAX_VISIBLE_TAGS = 3;\n\nexport const PromptVersionMetadata = ({\n  registeredPromptVersion,\n  registeredPrompt,\n  showEditAliasesModal,\n  onEditVersion,\n  showEditPromptVersionMetadataModal,\n  aliasesByVersion,\n  isBaseline,\n}: {\n  registeredPrompt?: RegisteredPrompt;\n  registeredPromptVersion?: RegisteredPromptVersion;\n  showEditAliasesModal?: (versionNumber: string) => void;\n  onEditVersion?: (vesrion: RegisteredPromptVersion) => void;\n  showEditPromptVersionMetadataModal?: (version: RegisteredPromptVersion) => void;\n  aliasesByVersion: Record<string, string[]>;\n  isBaseline?: boolean;\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  const runIds = useMemo(() => {\n    const tagValue = registeredPromptVersion?.tags?.find((tag) => tag.key === REGISTERED_PROMPT_SOURCE_RUN_IDS)?.value;\n    if (!tagValue) {\n      return [];\n    }\n    return tagValue.split(',').map((runId) => runId.trim());\n  }, [registeredPromptVersion]);\n\n  const { isLoading: isLoadingRuns, runInfoMap } = usePromptRunsInfo(runIds ? runIds : []);\n\n  if (!registeredPrompt || !registeredPromptVersion) {\n    return null;\n  }\n\n  const visibleTagList = registeredPromptVersion?.tags?.filter((tag) => isUserFacingTag(tag.key)) || [];\n\n  const versionElement = (\n    <FormattedMessage\n      defaultMessage=\"Version {version}\"\n      values={{ version: registeredPromptVersion.version }}\n      description=\"A label for the version number in the prompt details page\"\n    />\n  );\n\n  const onEditVersionMetadata = showEditPromptVersionMetadataModal\n    ? () => {\n        showEditPromptVersionMetadataModal(registeredPromptVersion);\n      }\n    : undefined;\n\n  return (\n    <div\n      css={{\n        display: 'grid',\n        gridTemplateColumns: '120px 1fr',\n        gridAutoRows: `minmax(${theme.typography.lineHeightLg}, auto)`,\n        alignItems: 'flex-start',\n        rowGap: theme.spacing.xs,\n        columnGap: theme.spacing.sm,\n      }}\n    >\n      {onEditVersion && (\n        <>\n          <Typography.Text bold>Version:</Typography.Text>\n          <Typography.Text>\n            <Typography.Link\n              componentId=\"mlflow.prompts.details.version.goto\"\n              onClick={() => onEditVersion(registeredPromptVersion)}\n            >\n              {versionElement}\n            </Typography.Link>{' '}\n            {isBaseline && (\n              <FormattedMessage\n                defaultMessage=\"(baseline)\"\n                description=\"A label displayed next to baseline version in the prompt versions comparison view\"\n              />\n            )}\n          </Typography.Text>\n        </>\n      )}\n      <Typography.Text bold>\n        <FormattedMessage\n          defaultMessage=\"Registered at:\"\n          description=\"A label for the registration timestamp in the prompt details page\"\n        />\n      </Typography.Text>\n      <Typography.Text>{Utils.formatTimestamp(registeredPromptVersion.creation_timestamp)}</Typography.Text>\n      <Typography.Text bold>\n        <FormattedMessage\n          defaultMessage=\"Aliases:\"\n          description=\"A label for the aliases list in the prompt details page\"\n        />\n      </Typography.Text>\n      <div>\n        <ModelVersionTableAliasesCell\n          css={{ maxWidth: 'none' }}\n          modelName={registeredPrompt.name}\n          version={registeredPromptVersion.version}\n          aliases={aliasesByVersion[registeredPromptVersion.version] || []}\n          onAddEdit={() => {\n            showEditAliasesModal?.(registeredPromptVersion.version);\n          }}\n        />\n      </div>\n      {registeredPromptVersion.description && (\n        <>\n          <Typography.Text bold>\n            <FormattedMessage\n              defaultMessage=\"Commit message:\"\n              description=\"A label for the commit message in the prompt details page\"\n            />\n          </Typography.Text>\n          <Typography.Text>{registeredPromptVersion.description}</Typography.Text>\n        </>\n      )}\n      <PromptVersionTags onEditVersionMetadata={onEditVersionMetadata} tags={visibleTagList} />\n      {(isLoadingRuns || runIds.length > 0) && (\n        <PromptVersionRuns isLoadingRuns={isLoadingRuns} runIds={runIds} runInfoMap={runInfoMap} />\n      )}\n    </div>\n  );\n};\n","import type { QueryFunctionContext } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { useQueries } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { transformGetRunResponse } from '../../../sdk/FieldNameTransformers';\nimport { MlflowService } from '../../../sdk/MlflowService';\nimport type { GetRunApiResponse } from '../../../types';\n\ntype UseRegisteredModelRelatedRunNamesQueryKey = ['prompt_associated_runs', string];\n\nexport const usePromptRunsInfo = (runUuids: string[] = []) => {\n  const queryResults = useQueries({\n    queries: runUuids.map((runUuid) => ({\n      queryKey: ['prompt_associated_runs', runUuid] as UseRegisteredModelRelatedRunNamesQueryKey,\n      queryFn: async ({\n        queryKey: [, runUuid],\n      }: QueryFunctionContext<UseRegisteredModelRelatedRunNamesQueryKey>): Promise<GetRunApiResponse | null> => {\n        try {\n          const data = await MlflowService.getRun({ run_id: runUuid });\n          return transformGetRunResponse(data);\n        } catch (e) {\n          return null;\n        }\n      },\n    })),\n  });\n\n  // Create a map of run_id to run info\n  const runInfoMap: Record<string, any | undefined> = {};\n\n  queryResults.forEach((queryResult, index) => {\n    const runUuid = runUuids[index];\n    runInfoMap[runUuid] = queryResult.data?.run?.info;\n  });\n\n  return {\n    isLoading: runUuids.length > 0 && queryResults.some((queryResult) => queryResult.isLoading),\n    runInfoMap,\n  };\n};\n","import {\n  Button,\n  CopyIcon,\n  Modal,\n  PlayIcon,\n  Spacer,\n  TrashIcon,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { useMemo, useState } from 'react';\nimport type { RegisteredPrompt, RegisteredPromptVersion } from '../types';\nimport { getPromptContentTagValue } from '../utils';\nimport { PromptVersionMetadata } from './PromptVersionMetadata';\nimport { FormattedMessage } from 'react-intl';\nimport { uniq } from 'lodash';\nimport { useDeletePromptVersionModal } from '../hooks/useDeletePromptVersionModal';\nimport { ShowArtifactCodeSnippet } from '../../../components/artifact-view-components/ShowArtifactCodeSnippet';\n\nconst PROMPT_VARIABLE_REGEX = /\\{\\{\\s*(.*?)\\s*\\}\\}/g;\n\nexport const PromptContentPreview = ({\n  promptVersion,\n  onUpdatedContent,\n  onDeletedVersion,\n  aliasesByVersion,\n  registeredPrompt,\n  showEditAliasesModal,\n  showEditPromptVersionMetadataModal,\n}: {\n  promptVersion?: RegisteredPromptVersion;\n  onUpdatedContent?: () => Promise<any>;\n  onDeletedVersion?: () => Promise<any>;\n  aliasesByVersion: Record<string, string[]>;\n  registeredPrompt?: RegisteredPrompt;\n  showEditAliasesModal?: (versionNumber: string) => void;\n  showEditPromptVersionMetadataModal: (promptVersion: RegisteredPromptVersion) => void;\n}) => {\n  const value = useMemo(() => (promptVersion ? getPromptContentTagValue(promptVersion) : ''), [promptVersion]);\n\n  const { DeletePromptModal, openModal: openDeleteModal } = useDeletePromptVersionModal({\n    promptVersion,\n    onSuccess: () => onDeletedVersion?.(),\n  });\n\n  const [showUsageExample, setShowUsageExample] = useState(false);\n\n  // Find all variables in the prompt content\n  const variableNames = useMemo(() => {\n    if (!value) {\n      return [];\n    }\n\n    const variables: string[] = [];\n    let match;\n\n    while ((match = PROMPT_VARIABLE_REGEX.exec(value)) !== null) {\n      variables.push(match[1]);\n    }\n\n    // Sanity check for tricky cases like nested brackets. If the variable name contains\n    // a bracket, we consider it as a parsing error and render a placeholder instead.\n    if (variables.some((variable) => variable.includes('{') || variable.includes('}'))) {\n      return null;\n    }\n\n    return uniq(variables);\n  }, [value]);\n  const codeSnippetContent = buildCodeSnippetContent(promptVersion, variableNames);\n\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div\n      css={{\n        flex: 1,\n        padding: theme.spacing.md,\n        paddingTop: 0,\n        borderRadius: theme.borders.borderRadiusSm,\n        overflow: 'auto',\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n    >\n      <div css={{ display: 'flex', justifyContent: 'space-between' }}>\n        <Typography.Title level={3}>Viewing version {promptVersion?.version}</Typography.Title>\n        <div css={{ display: 'flex', gap: theme.spacing.sm }}>\n          <Button\n            componentId=\"mlflow.prompts.details.delete_version\"\n            icon={<TrashIcon />}\n            type=\"primary\"\n            danger\n            onClick={openDeleteModal}\n          >\n            <FormattedMessage\n              defaultMessage=\"Delete version\"\n              description=\"A label for a button to delete prompt version on the prompt details page\"\n            />\n          </Button>\n          <Button\n            componentId=\"mlflow.prompts.details.preview.use\"\n            icon={<PlayIcon />}\n            onClick={() => setShowUsageExample(true)}\n          >\n            <FormattedMessage\n              defaultMessage=\"Use\"\n              description=\"A label for a button to display the modal with the usage example of the prompt\"\n            />\n          </Button>\n        </div>\n      </div>\n      <Spacer shrinks={false} />\n      <PromptVersionMetadata\n        aliasesByVersion={aliasesByVersion}\n        registeredPrompt={registeredPrompt}\n        registeredPromptVersion={promptVersion}\n        showEditAliasesModal={showEditAliasesModal}\n        showEditPromptVersionMetadataModal={showEditPromptVersionMetadataModal}\n      />\n      <Spacer shrinks={false} />\n      <div\n        css={{\n          backgroundColor: theme.colors.backgroundSecondary,\n          padding: theme.spacing.md,\n          overflow: 'auto',\n        }}\n      >\n        <Typography.Text\n          css={{\n            whiteSpace: 'pre-wrap',\n          }}\n        >\n          {value || 'Empty'}\n        </Typography.Text>\n      </div>\n      <Modal\n        componentId=\"mlflow.prompts.details.preview.usage_example_modal\"\n        title={\n          <FormattedMessage\n            defaultMessage=\"Usage example\"\n            description=\"A title of the modal showing the usage example of the prompt\"\n          />\n        }\n        visible={showUsageExample}\n        onCancel={() => setShowUsageExample(false)}\n        cancelText={\n          <FormattedMessage\n            defaultMessage=\"Dismiss\"\n            description=\"A label for the button to dismiss the modal with the usage example of the prompt\"\n          />\n        }\n      >\n        <ShowArtifactCodeSnippet code={buildCodeSnippetContent(promptVersion, variableNames)} />\n      </Modal>\n      {DeletePromptModal}\n    </div>\n  );\n};\n\nconst buildCodeSnippetContent = (promptVersion: RegisteredPromptVersion | undefined, variables: string[] | null) => {\n  let codeSnippetContent = `from openai import OpenAI\nimport mlflow\nclient = OpenAI(api_key=\"<YOUR_API_KEY>\")\n\n# Set MLflow tracking URI\nmlflow.set_tracking_uri(\"<YOUR_TRACKING_URI>\")\n\n# Example of loading and using the prompt\nprompt = mlflow.genai.load_prompt(\"prompts:/${promptVersion?.name}/${promptVersion?.version}\")`;\n\n  // Null variables mean that there was a parsing error\n  if (variables === null) {\n    codeSnippetContent += `\n\n# Replace the variables with the actual values\nvariables = {\n   \"key\": \"value\",\n   ...\n}\n\nresponse = client.chat.completions.create(\n    messages=[{\n        \"role\": \"user\",\n        \"content\": prompt.format(**variables),\n    }],\n    model=\"gpt-4o-mini\",\n)`;\n  } else {\n    codeSnippetContent += `\nresponse = client.chat.completions.create(\n    messages=[{\n        \"role\": \"user\",\n        \"content\": prompt.format(${variables.map((name) => `${name}=\"<${name}>\"`).join(', ')}),\n    }],\n    model=\"gpt-4o-mini\",\n)`;\n  }\n\n  codeSnippetContent += `\\n\\nprint(response.choices[0].message.content)`;\n  return codeSnippetContent;\n};\n","import { useMutation } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { Modal } from '@databricks/design-system';\nimport { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport type { RegisteredPromptVersion } from '../types';\nimport { RegisteredPromptsApi } from '../api';\n\nexport const useDeletePromptVersionModal = ({\n  promptVersion,\n  onSuccess,\n}: {\n  promptVersion?: RegisteredPromptVersion;\n  onSuccess?: () => void | Promise<any>;\n}) => {\n  const [open, setOpen] = useState(false);\n\n  const { mutate } = useMutation<\n    unknown,\n    Error,\n    {\n      promptName: string;\n      version: string;\n    }\n  >({\n    mutationFn: async ({ promptName, version }) => {\n      await RegisteredPromptsApi.deleteRegisteredPromptVersion(promptName, version);\n    },\n  });\n\n  const modalElement = (\n    <Modal\n      componentId=\"mlflow.prompts.delete_version_modal\"\n      visible={open}\n      onCancel={() => setOpen(false)}\n      title={\n        <FormattedMessage\n          defaultMessage=\"Delete prompt version\"\n          description=\"A header for the delete prompt version modal\"\n        />\n      }\n      okText={\n        <FormattedMessage\n          defaultMessage=\"Delete\"\n          description=\"A label for the confirm button in the delete prompt version modal\"\n        />\n      }\n      okButtonProps={{ danger: true }}\n      onOk={async () => {\n        if (!promptVersion?.name) {\n          setOpen(false);\n          return;\n        }\n        mutate(\n          {\n            promptName: promptVersion.name,\n            version: promptVersion.version,\n          },\n          {\n            onSuccess: () => {\n              onSuccess?.();\n              setOpen(false);\n            },\n          },\n        );\n        setOpen(false);\n      }}\n      cancelText={\n        <FormattedMessage\n          defaultMessage=\"Cancel\"\n          description=\"A label for the cancel button in the delete prompt version modal\"\n        />\n      }\n    >\n      <FormattedMessage\n        defaultMessage=\"Are you sure you want to delete the prompt version?\"\n        description=\"A content for the delete prompt version confirmation modal\"\n      />\n    </Modal>\n  );\n\n  const openModal = () => setOpen(true);\n\n  return { DeletePromptModal: modalElement, openModal };\n};\n","import { Button, ExpandMoreIcon, Spacer, Tooltip, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { useMemo } from 'react';\nimport type { RegisteredPrompt, RegisteredPromptVersion } from '../types';\nimport { getPromptContentTagValue } from '../utils';\nimport { PromptVersionMetadata } from './PromptVersionMetadata';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { diffWords } from '../diff';\n\nexport const PromptContentCompare = ({\n  baselineVersion,\n  comparedVersion,\n  onSwitchSides,\n  onEditVersion,\n  registeredPrompt,\n  aliasesByVersion,\n  showEditAliasesModal,\n}: {\n  baselineVersion?: RegisteredPromptVersion;\n  comparedVersion?: RegisteredPromptVersion;\n  onSwitchSides: () => void;\n  onEditVersion: (version?: RegisteredPromptVersion) => void;\n  registeredPrompt?: RegisteredPrompt;\n  aliasesByVersion: Record<string, string[]>;\n  showEditAliasesModal?: (versionNumber: string) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n\n  const baselineValue = useMemo(\n    () => (baselineVersion ? getPromptContentTagValue(baselineVersion) : ''),\n    [baselineVersion],\n  );\n  const comparedValue = useMemo(\n    () => (comparedVersion ? getPromptContentTagValue(comparedVersion) : ''),\n    [comparedVersion],\n  );\n\n  const diff = useMemo(() => diffWords(baselineValue ?? '', comparedValue ?? '') ?? [], [baselineValue, comparedValue]);\n\n  const colors = useMemo(\n    () => ({\n      addedBackground: theme.isDarkMode ? theme.colors.green700 : theme.colors.green300,\n      removedBackground: theme.isDarkMode ? theme.colors.red700 : theme.colors.red300,\n    }),\n    [theme],\n  );\n\n  return (\n    <div\n      css={{\n        flex: 1,\n        padding: theme.spacing.md,\n        paddingTop: 0,\n        borderRadius: theme.borders.borderRadiusSm,\n        overflow: 'hidden',\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n    >\n      <div css={{ display: 'flex', justifyContent: 'space-between' }}>\n        <Typography.Title level={3}>\n          <FormattedMessage\n            defaultMessage=\"Comparing version {baseline} with version {compared}\"\n            description=\"Label for comparing prompt versions in the prompt comparison view. Variables {baseline} and {compared} are numeric version numbers being compared.\"\n            values={{\n              baseline: baselineVersion?.version,\n              compared: comparedVersion?.version,\n            }}\n          />\n        </Typography.Title>\n      </div>\n      <Spacer shrinks={false} />\n      <div css={{ display: 'flex' }}>\n        <div css={{ flex: 1 }}>\n          <PromptVersionMetadata\n            aliasesByVersion={aliasesByVersion}\n            onEditVersion={onEditVersion}\n            registeredPrompt={registeredPrompt}\n            registeredPromptVersion={baselineVersion}\n            showEditAliasesModal={showEditAliasesModal}\n            isBaseline\n          />\n        </div>\n        <div css={{ paddingLeft: theme.spacing.sm, paddingRight: theme.spacing.sm }}>\n          <div css={{ width: theme.general.heightSm }} />\n        </div>\n        <div css={{ flex: 1 }}>\n          <PromptVersionMetadata\n            aliasesByVersion={aliasesByVersion}\n            onEditVersion={onEditVersion}\n            registeredPrompt={registeredPrompt}\n            registeredPromptVersion={comparedVersion}\n            showEditAliasesModal={showEditAliasesModal}\n          />\n        </div>\n      </div>\n      <Spacer shrinks={false} />\n      <div css={{ display: 'flex', flex: 1, overflow: 'auto', alignItems: 'flex-start' }}>\n        <div\n          css={{\n            backgroundColor: theme.colors.backgroundSecondary,\n            padding: theme.spacing.md,\n            flex: 1,\n          }}\n        >\n          <Typography.Text\n            css={{\n              whiteSpace: 'pre-wrap',\n            }}\n          >\n            {baselineValue || 'Empty'}\n          </Typography.Text>\n        </div>\n        <div css={{ paddingLeft: theme.spacing.sm, paddingRight: theme.spacing.sm }}>\n          <Tooltip\n            componentId=\"mlflow.prompts.details.switch_sides.tooltip\"\n            content={\n              <FormattedMessage\n                defaultMessage=\"Switch sides\"\n                description=\"A label for button used to switch prompt versions when in side-by-side comparison view\"\n              />\n            }\n            side=\"top\"\n          >\n            <Button\n              aria-label={intl.formatMessage({\n                defaultMessage: 'Switch sides',\n                description: 'A label for button used to switch prompt versions when in side-by-side comparison view',\n              })}\n              componentId=\"mlflow.prompts.details.switch_sides\"\n              icon={<ExpandMoreIcon css={{ svg: { rotate: '90deg' } }} />}\n              onClick={onSwitchSides}\n            />\n          </Tooltip>\n        </div>\n\n        <div\n          css={{\n            backgroundColor: theme.colors.backgroundSecondary,\n            padding: theme.spacing.md,\n            flex: 1,\n          }}\n        >\n          <Typography.Text\n            css={{\n              whiteSpace: 'pre-wrap',\n            }}\n          >\n            {diff.map((part, index) => (\n              <span\n                key={index}\n                css={{\n                  backgroundColor: part.added\n                    ? colors.addedBackground\n                    : part.removed\n                    ? colors.removedBackground\n                    : undefined,\n                  textDecoration: part.removed ? 'line-through' : 'none',\n                }}\n              >\n                {part.value}\n              </span>\n            ))}\n          </Typography.Text>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import type { RegisteredPrompt } from '../types';\nimport { Button, PencilIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useUpdateRegisteredPromptTags } from '../hooks/useUpdateRegisteredPromptTags';\nimport { isUserFacingTag } from '../../../../common/utils/TagUtils';\nimport { KeyValueTag } from '../../../../common/components/KeyValueTag';\n\nexport const PromptsListTableTagsBox = ({\n  promptEntity,\n  onTagsUpdated,\n}: {\n  promptEntity?: RegisteredPrompt;\n  onTagsUpdated?: () => void;\n}) => {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  const { EditTagsModal, showEditPromptTagsModal } = useUpdateRegisteredPromptTags({ onSuccess: onTagsUpdated });\n\n  const visibleTagList = promptEntity?.tags.filter((tag) => isUserFacingTag(tag.key)) || [];\n  const containsTags = visibleTagList.length > 0;\n\n  return (\n    <div\n      css={{\n        paddingTop: theme.spacing.xs,\n        paddingBottom: theme.spacing.xs,\n\n        display: 'flex',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        gap: theme.spacing.xs,\n      }}\n    >\n      {visibleTagList?.map((tag) => (\n        <KeyValueTag key={tag.key} tag={tag} />\n      ))}\n      <Button\n        componentId=\"mlflow.prompts.details.tags.edit\"\n        size=\"small\"\n        icon={!containsTags ? undefined : <PencilIcon />}\n        onClick={() => promptEntity && showEditPromptTagsModal(promptEntity)}\n        aria-label={intl.formatMessage({\n          defaultMessage: 'Edit tags',\n          description: 'Label for the edit tags button on the registered prompt details page\"',\n        })}\n        children={\n          !containsTags ? (\n            <FormattedMessage\n              defaultMessage=\"Add tags\"\n              description=\"Label for the add tags button on the registered prompt details page\"\n            />\n          ) : undefined\n        }\n        type=\"tertiary\"\n      />\n      {EditTagsModal}\n    </div>\n  );\n};\n","import { ErrorView } from '@mlflow/mlflow/src/common/components/ErrorView';\nimport Routes from '../../../routes';\n\ninterface Props {\n  promptName: string;\n}\n\nexport function PromptNotFoundView({ promptName }: Props) {\n  return (\n    <ErrorView\n      statusCode={404}\n      subMessage={`Prompt name '${promptName}' does not exist`}\n      fallbackHomePageReactRoute={Routes.promptsPageRoute}\n    />\n  );\n}\n","import invariant from 'invariant';\nimport { useDispatch } from 'react-redux';\nimport { usePromptDetailsQuery } from './hooks/usePromptDetailsQuery';\nimport { Link, useNavigate, useParams } from '../../../common/utils/RoutingUtils';\nimport { ScrollablePageWrapper } from '../../../common/components/ScrollablePageWrapper';\nimport {\n  Breadcrumb,\n  Button,\n  ColumnsIcon,\n  DropdownMenu,\n  GenericSkeleton,\n  Header,\n  OverflowIcon,\n  SegmentedControlButton,\n  SegmentedControlGroup,\n  Spacer,\n  TableIcon,\n  TableSkeleton,\n  useDesignSystemTheme,\n  ZoomMarqueeSelection,\n} from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { PromptVersionsTableMode } from './utils';\nimport { useMemo } from 'react';\nimport Routes from '../../routes';\nimport { CreatePromptModalMode, useCreatePromptModal } from './hooks/useCreatePromptModal';\nimport { useDeletePromptModal } from './hooks/useDeletePromptModal';\nimport { PromptVersionsTable } from './components/PromptVersionsTable';\nimport { useEditAliasesModal } from '../../../common/hooks/useEditAliasesModal';\nimport { usePromptDetailsPageViewState } from './hooks/usePromptDetailsPageViewState';\nimport { PromptContentPreview } from './components/PromptContentPreview';\nimport { PromptContentCompare } from './components/PromptContentCompare';\nimport { withErrorBoundary } from '../../../common/utils/withErrorBoundary';\nimport ErrorUtils from '../../../common/utils/ErrorUtils';\nimport { PromptPageErrorHandler } from './components/PromptPageErrorHandler';\nimport { first, isEmpty } from 'lodash';\nimport { PromptsListTableTagsBox } from './components/PromptDetailsTagsBox';\nimport { PromptNotFoundView } from './components/PromptNotFoundView';\nimport { useUpdatePromptVersionMetadataModal } from './hooks/useUpdatePromptVersionMetadataModal';\nimport type { ThunkDispatch } from '../../../redux-types';\nimport { setModelVersionAliasesApi } from '../../../model-registry/actions';\n\nconst getAliasesModalTitle = (version: string) => (\n  <FormattedMessage\n    defaultMessage=\"Add/edit alias for prompt version {version}\"\n    description=\"Title for the edit aliases modal on the registered prompt details page\"\n    values={{ version }}\n  />\n);\n\nconst PromptsDetailsPage = () => {\n  const { promptName } = useParams<{ promptName: string }>();\n  const { theme } = useDesignSystemTheme();\n  const navigate = useNavigate();\n\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  invariant(promptName, 'Prompt name should be defined');\n\n  const { data: promptDetailsData, refetch, isLoading, error: promptLoadError } = usePromptDetailsQuery({ promptName });\n\n  const { CreatePromptModal, openModal: openCreateVersionModal } = useCreatePromptModal({\n    mode: CreatePromptModalMode.CreatePromptVersion,\n    registeredPrompt: promptDetailsData?.prompt,\n    latestVersion: first(promptDetailsData?.versions),\n    onSuccess: async ({ promptVersion }) => {\n      await refetch();\n      if (promptVersion) {\n        setPreviewMode({ version: promptVersion });\n      }\n    },\n  });\n\n  const { DeletePromptModal, openModal: openDeleteModal } = useDeletePromptModal({\n    registeredPrompt: promptDetailsData?.prompt,\n    onSuccess: () => navigate(Routes.promptsPageRoute),\n  });\n\n  const { EditPromptVersionMetadataModal, showEditPromptVersionMetadataModal } = useUpdatePromptVersionMetadataModal({\n    onSuccess: refetch,\n  });\n\n  const {\n    setCompareMode,\n    setPreviewMode,\n    setTableMode,\n    switchSides,\n    viewState,\n    setSelectedVersion,\n    setComparedVersion,\n  } = usePromptDetailsPageViewState(promptDetailsData);\n\n  const { mode } = viewState;\n\n  const isEmptyVersions = !isLoading && !promptDetailsData?.versions.length;\n\n  const showPreviewPane =\n    !isLoading && !isEmptyVersions && [PromptVersionsTableMode.PREVIEW, PromptVersionsTableMode.COMPARE].includes(mode);\n\n  const selectedVersionEntity = promptDetailsData?.versions.find(\n    ({ version }) => version === viewState.selectedVersion,\n  );\n\n  const comparedVersionEntity = promptDetailsData?.versions.find(\n    ({ version }) => version === viewState.comparedVersion,\n  );\n\n  const aliasesByVersion = useMemo(() => {\n    const result: Record<string, string[]> = {};\n    promptDetailsData?.prompt?.aliases?.forEach(({ alias, version }) => {\n      if (!result[version]) {\n        result[version] = [];\n      }\n      result[version].push(alias);\n    });\n    return result;\n  }, [promptDetailsData]);\n\n  const { EditAliasesModal, showEditAliasesModal } = useEditAliasesModal({\n    aliases: promptDetailsData?.prompt?.aliases ?? [],\n    onSuccess: refetch,\n    getTitle: getAliasesModalTitle,\n    onSave: async (currentlyEditedVersion: string, existingAliases: string[], draftAliases: string[]) =>\n      dispatch(\n        setModelVersionAliasesApi(\n          promptDetailsData?.prompt?.name ?? '',\n          currentlyEditedVersion,\n          existingAliases,\n          draftAliases,\n        ),\n      ),\n    description: (\n      <FormattedMessage\n        // TODO: add a documentation link (\"Learn more\")\n        defaultMessage=\"Aliases allow you to assign a mutable, named reference to a particular prompt version.\"\n        description=\"Description for the edit aliases modal on the registered prompt details page\"\n      />\n    ),\n  });\n\n  // If the load error occurs, show not found page\n  if (promptLoadError) {\n    return <PromptNotFoundView promptName={promptName} />;\n  }\n\n  const breadcrumbs = (\n    <Breadcrumb>\n      <Breadcrumb.Item>\n        <Link to={Routes.promptsPageRoute}>Prompts</Link>\n      </Breadcrumb.Item>\n    </Breadcrumb>\n  );\n\n  if (isLoading) {\n    return (\n      <ScrollablePageWrapper>\n        <PromptsDetailsPage.Skeleton breadcrumbs={breadcrumbs} />\n      </ScrollablePageWrapper>\n    );\n  }\n\n  return (\n    <ScrollablePageWrapper css={{ overflow: 'hidden', display: 'flex', flexDirection: 'column' }}>\n      <Spacer shrinks={false} />\n      <Header\n        breadcrumbs={breadcrumbs}\n        title={promptDetailsData?.prompt?.name}\n        buttons={\n          <>\n            <DropdownMenu.Root>\n              <DropdownMenu.Trigger asChild>\n                <Button\n                  componentId=\"mlflow.prompts.details.actions\"\n                  icon={<OverflowIcon />}\n                  aria-label=\"More actions\"\n                />\n              </DropdownMenu.Trigger>\n              <DropdownMenu.Content>\n                <DropdownMenu.Item componentId=\"mlflow.prompts.details.actions.delete\" onClick={openDeleteModal}>\n                  <FormattedMessage\n                    defaultMessage=\"Delete\"\n                    description=\"Label for the delete prompt action on the registered prompt details page\"\n                  />\n                </DropdownMenu.Item>\n              </DropdownMenu.Content>\n            </DropdownMenu.Root>\n            <Button componentId=\"mlflow.prompts.details.create\" type=\"primary\" onClick={openCreateVersionModal}>\n              <FormattedMessage\n                defaultMessage=\"Create prompt version\"\n                description=\"Label for the create prompt action on the registered prompt details page\"\n              />\n            </Button>\n          </>\n        }\n      />\n      <PromptsListTableTagsBox onTagsUpdated={refetch} promptEntity={promptDetailsData?.prompt} />\n      <Spacer shrinks={false} />\n      <div css={{ flex: 1, display: 'flex', overflow: 'hidden' }}>\n        <div css={{ flex: showPreviewPane ? '0 0 320px' : 1, display: 'flex', flexDirection: 'column' }}>\n          <div css={{ display: 'flex', gap: theme.spacing.sm }}>\n            <SegmentedControlGroup\n              name=\"mlflow.prompts.details.mode\"\n              componentId=\"mlflow.prompts.details.mode\"\n              value={mode}\n              disabled={isLoading}\n            >\n              <SegmentedControlButton value={PromptVersionsTableMode.PREVIEW} onClick={() => setPreviewMode()}>\n                <div css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs }}>\n                  <ZoomMarqueeSelection />\n                  <FormattedMessage\n                    defaultMessage=\"Preview\"\n                    description=\"Label for the preview mode on the registered prompt details page\"\n                  />\n                </div>\n              </SegmentedControlButton>\n              <SegmentedControlButton value={PromptVersionsTableMode.TABLE} onClick={setTableMode}>\n                <div css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs }}>\n                  <TableIcon />{' '}\n                  <FormattedMessage\n                    defaultMessage=\"List\"\n                    description=\"Label for the list mode on the registered prompt details page\"\n                  />\n                </div>\n              </SegmentedControlButton>\n              <SegmentedControlButton\n                disabled={Boolean(!promptDetailsData?.versions.length || promptDetailsData?.versions.length < 2)}\n                value={PromptVersionsTableMode.COMPARE}\n                onClick={setCompareMode}\n              >\n                <div css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs }}>\n                  <ColumnsIcon />{' '}\n                  <FormattedMessage\n                    defaultMessage=\"Compare\"\n                    description=\"Label for the compare mode on the registered prompt details page\"\n                  />\n                </div>\n              </SegmentedControlButton>\n            </SegmentedControlGroup>\n          </div>\n          <Spacer shrinks={false} size=\"sm\" />\n          <PromptVersionsTable\n            isLoading={isLoading}\n            registeredPrompt={promptDetailsData?.prompt}\n            promptVersions={promptDetailsData?.versions}\n            selectedVersion={viewState.selectedVersion}\n            comparedVersion={viewState.comparedVersion}\n            showEditAliasesModal={showEditAliasesModal}\n            aliasesByVersion={aliasesByVersion}\n            onUpdateSelectedVersion={setSelectedVersion}\n            onUpdateComparedVersion={setComparedVersion}\n            mode={mode}\n          />\n        </div>\n        {showPreviewPane && (\n          <div css={{ flex: 1, display: 'flex', flexDirection: 'column' }}>\n            <div css={{ borderLeft: `1px solid ${theme.colors.border}`, flex: 1, overflow: 'hidden', display: 'flex' }}>\n              {mode === PromptVersionsTableMode.PREVIEW && (\n                <PromptContentPreview\n                  promptVersion={selectedVersionEntity}\n                  onUpdatedContent={refetch}\n                  onDeletedVersion={async () => {\n                    await refetch().then(({ data }) => {\n                      if (!isEmpty(data?.versions) && data?.versions[0].version) {\n                        setSelectedVersion(data?.versions[0].version);\n                      } else {\n                        setTableMode();\n                      }\n                    });\n                  }}\n                  aliasesByVersion={aliasesByVersion}\n                  showEditAliasesModal={showEditAliasesModal}\n                  registeredPrompt={promptDetailsData?.prompt}\n                  showEditPromptVersionMetadataModal={showEditPromptVersionMetadataModal}\n                />\n              )}\n              {mode === PromptVersionsTableMode.COMPARE && (\n                <PromptContentCompare\n                  baselineVersion={selectedVersionEntity}\n                  comparedVersion={comparedVersionEntity}\n                  onSwitchSides={switchSides}\n                  onEditVersion={setPreviewMode}\n                  showEditAliasesModal={showEditAliasesModal}\n                  registeredPrompt={promptDetailsData?.prompt}\n                  aliasesByVersion={aliasesByVersion}\n                />\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n      <Spacer shrinks={false} />\n      {EditAliasesModal}\n      {CreatePromptModal}\n      {DeletePromptModal}\n      {EditPromptVersionMetadataModal}\n    </ScrollablePageWrapper>\n  );\n};\n\nPromptsDetailsPage.Skeleton = function PromptsDetailsPageSkeleton({ breadcrumbs }: { breadcrumbs?: React.ReactNode }) {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <>\n      <Spacer shrinks={false} />\n      <Header\n        breadcrumbs={breadcrumbs}\n        title={<GenericSkeleton css={{ height: theme.general.heightBase, width: 200 }} />}\n        buttons={<GenericSkeleton css={{ height: theme.general.heightBase, width: 120 }} />}\n      />\n      <Spacer shrinks={false} />\n      <TableSkeleton lines={4} />\n      <Spacer shrinks={false} />\n      <div css={{ display: 'flex', gap: theme.spacing.lg }}>\n        <div css={{ flex: '0 0 320px' }}>\n          <TableSkeleton lines={6} />\n        </div>\n        <div css={{ flex: 1 }}>\n          <TableSkeleton lines={4} />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default withErrorBoundary(\n  ErrorUtils.mlflowServices.EXPERIMENTS,\n  PromptsDetailsPage,\n  undefined,\n  PromptPageErrorHandler,\n);\n","import { useMutation } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { Modal } from '@databricks/design-system';\nimport { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport type { RegisteredPrompt } from '../types';\nimport { RegisteredPromptsApi } from '../api';\n\nexport const useDeletePromptModal = ({\n  registeredPrompt,\n  onSuccess,\n}: {\n  registeredPrompt?: RegisteredPrompt;\n  onSuccess?: () => void | Promise<any>;\n}) => {\n  const [open, setOpen] = useState(false);\n\n  const { mutate } = useMutation<\n    unknown,\n    Error,\n    {\n      promptName: string;\n    }\n  >({\n    mutationFn: async ({ promptName }) => {\n      await RegisteredPromptsApi.deleteRegisteredPrompt(promptName);\n    },\n  });\n\n  const modalElement = (\n    <Modal\n      componentId=\"mlflow.prompts.delete_modal\"\n      visible={open}\n      onCancel={() => setOpen(false)}\n      title={<FormattedMessage defaultMessage=\"Delete prompt\" description=\"A header for the delete prompt modal\" />}\n      okText={\n        <FormattedMessage\n          defaultMessage=\"Delete\"\n          description=\"A label for the confirm button in the delete prompt modal\"\n        />\n      }\n      okButtonProps={{ danger: true }}\n      onOk={async () => {\n        if (!registeredPrompt?.name) {\n          setOpen(false);\n          return;\n        }\n        mutate(\n          {\n            promptName: registeredPrompt.name,\n          },\n          {\n            onSuccess: () => {\n              onSuccess?.();\n              setOpen(false);\n            },\n          },\n        );\n        setOpen(false);\n      }}\n      cancelText={\n        <FormattedMessage\n          defaultMessage=\"Cancel\"\n          description=\"A label for the cancel button in the delete prompt modal\"\n        />\n      }\n    >\n      <FormattedMessage\n        defaultMessage=\"Are you sure you want to delete the prompt?\"\n        description=\"A content for the delete prompt confirmation modal\"\n      />\n    </Modal>\n  );\n\n  const openModal = () => setOpen(true);\n\n  return { DeletePromptModal: modalElement, openModal };\n};\n","import { useMutation } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport { useEditKeyValueTagsModal } from '../../../../common/hooks/useEditKeyValueTagsModal';\nimport { RegisteredPromptsApi } from '../api';\nimport type { RegisteredPromptVersion } from '../types';\nimport { useCallback } from 'react';\nimport { diffCurrentAndNewTags, isUserFacingTag } from '../../../../common/utils/TagUtils';\nimport { FormattedMessage } from 'react-intl';\n\ntype UpdatePromptVersionMetadataPayload = {\n  promptName: string;\n  promptVersion: string;\n  toAdd: { key: string; value: string }[];\n  toDelete: { key: string }[];\n};\n\nexport const useUpdatePromptVersionMetadataModal = ({ onSuccess }: { onSuccess?: () => void }) => {\n  const updateMutation = useMutation<unknown, Error, UpdatePromptVersionMetadataPayload>({\n    mutationFn: async ({ toAdd, toDelete, promptName, promptVersion }) => {\n      return Promise.all([\n        ...toAdd.map(({ key, value }) =>\n          RegisteredPromptsApi.setRegisteredPromptVersionTag(promptName, promptVersion, key, value),\n        ),\n        ...toDelete.map(({ key }) =>\n          RegisteredPromptsApi.deleteRegisteredPromptVersionTag(promptName, promptVersion, key),\n        ),\n      ]);\n    },\n  });\n\n  const {\n    EditTagsModal: EditPromptVersionMetadataModal,\n    showEditTagsModal,\n    isLoading,\n  } = useEditKeyValueTagsModal<Pick<RegisteredPromptVersion, 'name' | 'version' | 'tags'>>({\n    title: (\n      <FormattedMessage\n        defaultMessage=\"Add/Edit Prompt Version Metadata\"\n        description=\"Title for a modal that allows the user to add or edit metadata tags on prompt versions.\"\n      />\n    ),\n    valueRequired: true,\n    saveTagsHandler: (promptVersion, currentTags, newTags) => {\n      const { addedOrModifiedTags, deletedTags } = diffCurrentAndNewTags(currentTags, newTags);\n\n      return new Promise<void>((resolve, reject) => {\n        if (!promptVersion.name) {\n          return reject();\n        }\n        // Send all requests to the mutation\n        updateMutation.mutate(\n          {\n            promptName: promptVersion.name,\n            promptVersion: promptVersion.version,\n            toAdd: addedOrModifiedTags,\n            toDelete: deletedTags,\n          },\n          {\n            onSuccess: () => {\n              resolve();\n              onSuccess?.();\n            },\n            onError: reject,\n          },\n        );\n      });\n    },\n  });\n\n  const showEditPromptVersionMetadataModal = useCallback(\n    (promptVersion: RegisteredPromptVersion) =>\n      showEditTagsModal({\n        name: promptVersion.name,\n        version: promptVersion.version,\n        tags: promptVersion.tags?.filter((tag) => isUserFacingTag(tag.key)),\n      }),\n    [showEditTagsModal],\n  );\n\n  return { EditPromptVersionMetadataModal, showEditPromptVersionMetadataModal, isLoading };\n};\n","import { Tag, useDesignSystemTheme } from '@databricks/design-system';\nimport type { TagProps } from '@databricks/design-system';\n\ntype ModelVersionAliasTagProps = { value: string; compact?: boolean } & Pick<\n  TagProps,\n  'closable' | 'onClose' | 'className'\n>;\n\n// When displayed in compact mode (e.g. within <Select>), constrain the width to 160 pixels\nconst COMPACT_MODE_MAX_WIDTH = 160;\nconst REGULAR_MAX_WIDTH = 300;\nconst TAG_SYMBOL = '@';\n\nexport const AliasTag = ({ value, closable, onClose, className, compact = false }: ModelVersionAliasTagProps) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <Tag\n      componentId=\"codegen_mlflow_app_src_model-registry_components_aliases_modelversionaliastag.tsx_23\"\n      css={{\n        fontWeight: theme.typography.typographyBoldFontWeight,\n        marginRight: theme.spacing.xs,\n      }}\n      className={className}\n      closable={closable}\n      onClose={onClose}\n      title={value}\n    >\n      <span\n        css={{\n          display: 'block',\n          whiteSpace: 'nowrap',\n          maxWidth: compact ? COMPACT_MODE_MAX_WIDTH : REGULAR_MAX_WIDTH,\n          textOverflow: 'ellipsis',\n          overflow: 'hidden',\n        }}\n      >\n        {TAG_SYMBOL}&nbsp;{value}\n      </span>\n    </Tag>\n  );\n};\n","import { Button, PencilIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { AliasTag } from '../../../common/components/AliasTag';\nimport { FormattedMessage } from 'react-intl';\n\ninterface ModelVersionTableAliasesCellProps {\n  aliases?: string[];\n  modelName: string;\n  version: string;\n  onAddEdit: () => void;\n  className?: string;\n}\n\nexport const ModelVersionTableAliasesCell = ({\n  aliases = [],\n  onAddEdit,\n  className,\n}: ModelVersionTableAliasesCellProps) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <div\n      css={{\n        maxWidth: 300,\n        display: 'flex',\n        flexWrap: 'wrap',\n        alignItems: 'flex-start',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        rowGap: theme.spacing.xs / 2,\n        columnGap: theme.spacing.xs,\n      }}\n      className={className}\n    >\n      {aliases.length < 1 ? (\n        <Button\n          componentId=\"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30\"\n          size=\"small\"\n          type=\"link\"\n          onClick={onAddEdit}\n        >\n          <FormattedMessage\n            defaultMessage=\"Add\"\n            description=\"Model registry > model version table > aliases column > 'add' button label\"\n          />\n        </Button>\n      ) : (\n        <>\n          {aliases.map((alias) => (\n            <AliasTag value={alias} key={alias} css={{ marginTop: theme.spacing.xs / 2 }} />\n          ))}\n          <Button\n            componentId=\"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41\"\n            size=\"small\"\n            icon={<PencilIcon />}\n            onClick={onAddEdit}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n","import { css } from '@emotion/react';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport type { ButtonProps } from '@databricks/design-system';\nimport { Button, LegacyTooltip } from '@databricks/design-system';\n\ntype SnippetActionButtonProps = Pick<ButtonProps, 'icon' | 'onClick' | 'href' | 'rel' | 'target'> & {\n  tooltipMessage: NonNullable<ReactNode>;\n};\n\nexport default function SnippetActionButton({ tooltipMessage, ...buttonProps }: SnippetActionButtonProps) {\n  const style = css({\n    zIndex: 1, // required for action buttons to be visible and float\n  });\n  return (\n    <LegacyTooltip title={tooltipMessage}>\n      <Button\n        componentId=\"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33\"\n        {...buttonProps}\n        css={style}\n      />\n    </LegacyTooltip>\n  );\n}\n","import React from 'react';\n\nimport type { ButtonProps } from '@databricks/design-system';\nimport { useCopyController } from '@databricks/web-shared/copy';\n\nimport SnippetActionButton from './SnippetActionButton';\n\nexport interface SnippetCopyActionProps extends ButtonProps {\n  /**\n   * The text to be copied into clipboard when action button is clicked.\n   */\n  copyText: string;\n  onClick?: (e: React.MouseEvent) => void;\n}\n\nexport function SnippetCopyAction({ copyText, onClick, ...props }: SnippetCopyActionProps) {\n  const { actionIcon, tooltipMessage, copy } = useCopyController(copyText);\n\n  return (\n    <SnippetActionButton\n      tooltipMessage={tooltipMessage}\n      icon={actionIcon}\n      onClick={(e) => {\n        copy();\n        onClick?.(e);\n      }}\n      {...props}\n    />\n  );\n}\n","import { PrismLight as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport go from 'react-syntax-highlighter/dist/cjs/languages/prism/go';\nimport java from 'react-syntax-highlighter/dist/cjs/languages/prism/java';\nimport javascript from 'react-syntax-highlighter/dist/cjs/languages/prism/javascript';\nimport json from 'react-syntax-highlighter/dist/cjs/languages/prism/json';\nimport python from 'react-syntax-highlighter/dist/cjs/languages/prism/python';\nimport yaml from 'react-syntax-highlighter/dist/cjs/languages/prism/yaml';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/prism/sql';\n\nSyntaxHighlighter.registerLanguage('sql', sql);\nSyntaxHighlighter.registerLanguage('java', java);\nSyntaxHighlighter.registerLanguage('python', python);\nSyntaxHighlighter.registerLanguage('go', go);\nSyntaxHighlighter.registerLanguage('javascript', javascript);\nSyntaxHighlighter.registerLanguage('yaml', yaml);\nSyntaxHighlighter.registerLanguage('json', json);\n\nimport duotoneDarkStyle from './theme/databricks-duotone-dark';\nimport lightStyle from './theme/databricks-light';\nimport type { CSSProperties, ReactNode } from 'react';\nimport { pick } from 'lodash';\nexport type CodeSnippetTheme = 'duotoneDark' | 'light';\nexport const buttonBackgroundColorDark = 'rgba(140, 203, 255, 0)';\nexport const buttonColorDark = 'rgba(255, 255, 255, 0.84)';\nexport const buttonHoverColorDark = '#8ccbffcc';\nexport const buttonHoverBackgroundColorDark = 'rgba(140, 203, 255, 0.08)';\nexport const duboisAlertBackgroundColor = '#fff0f0';\nexport const snippetPadding = '24px';\nconst themesStyles: Record<CodeSnippetTheme, any> = {\n  light: lightStyle,\n  duotoneDark: duotoneDarkStyle,\n};\n\nexport type CodeSnippetLanguage = 'sql' | 'java' | 'python' | 'javascript' | 'go' | 'yaml' | 'text' | 'json';\n\nexport interface CodeSnippetProps {\n  /**\n   * The code string\n   */\n  children: string;\n  /**\n   * The actions that are displayed on the right top corner of the component\n   *  see `./actions` for built-in actions\n   */\n  actions?: NonNullable<ReactNode> | NonNullable<ReactNode>[];\n  /**\n   * The theme, default theme is `light`\n   */\n  theme?: CodeSnippetTheme;\n  /**\n   * Language of the code (`children`)\n   */\n  language: CodeSnippetLanguage;\n  /**\n   * Custom styles (passed to the internal `<pre>`)\n   */\n  style?: CSSProperties;\n  /**\n   * Whether to show line numbers on the left or not\n   */\n  showLineNumbers?: boolean;\n  /**\n   * Custom styles for line numbers\n   */\n  lineNumberStyle?: CSSProperties;\n  /**\n   * Boolean to specify whether to style the <code> block with white-space: pre-wrap or white-space: pre\n   */\n  wrapLongLines?: boolean;\n  /**\n   * Boolean that determines whether or not each line of code should be wrapped in a parent element\n   */\n  wrapLines?: boolean;\n  /**\n   * Props to pass to the line elements\n   */\n  lineProps?: React.HTMLProps<HTMLElement> | undefined;\n  /**\n   * Custom tag to use for the `<pre>` element\n   */\n  PreTag?: keyof JSX.IntrinsicElements | React.ComponentType<React.PropsWithChildren<any>> | undefined;\n}\n\n/**\n * `CodeSnippet` is used for highlighting code, use this instead of\n */\nexport function CodeSnippet({\n  theme = 'light',\n  language,\n  actions,\n  style,\n  children,\n  showLineNumbers,\n  lineNumberStyle,\n  wrapLongLines,\n  wrapLines,\n  PreTag,\n}: CodeSnippetProps) {\n  const customStyle = {\n    border: 'none',\n    borderRadius: 0,\n    margin: 0,\n    padding: snippetPadding,\n    ...style,\n  };\n  return (\n    <SyntaxHighlighter\n      showLineNumbers={showLineNumbers}\n      lineNumberStyle={lineNumberStyle}\n      language={language}\n      style={themesStyles[theme]}\n      customStyle={customStyle}\n      codeTagProps={{\n        style: pick(style, 'backgroundColor'),\n      }}\n      wrapLongLines={wrapLongLines}\n      wrapLines={wrapLines}\n      PreTag={PreTag}\n    >\n      {children}\n    </SyntaxHighlighter>\n  );\n}\n\nexport * from './actions/SnippetCopyAction';\n"],"names":["fontFamily","fontSize","lineHeight","direction","textAlign","whiteSpace","wordSpacing","wordBreak","MozTabSize","OTabSize","tabSize","WebkitHyphens","MozHyphens","msHyphens","hyphens","background","color","padding","margin","overflow","textShadow","borderRadius","comment","prolog","doctype","cdata","punctuation","namespace","Opacity","tag","operator","number","property","function","selector","boolean","string","entity","cursor","url","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable","deleted","textDecoration","inserted","borderBottom","italic","fontStyle","important","fontWeight","bold","Outline","OutlineOffset","borderRightColor","_ref","name","styles","_ref2","_ref3","_ref4","AliasSelect","renderKey","setDraftAliases","existingAliases","draftAliases","version","aliasToVersionMap","disabled","intl","useIntl","dropdownVisible","setDropdownVisible","useState","theme","useDesignSystemTheme","removeFromEditedAliases","useCallback","alias","aliases","filter","existingAlias","updateEditedAliases","sanitizedAliases","map","replace","toLowerCase","substring","length","uniqueAliases","Array","from","Set","_jsxs","LegacySelect","filterOption","val","opt","value","startsWith","formatMessage","id","defaultMessage","allowClear","css","mode","onChange","dangerouslySetAntdProps","dropdownMatchSelectWidth","tagRender","_jsx","AliasTag","compact","closable","onClose","toString","onDropdownVisibleChange","open","children","Option","_css","display","marginRight","spacing","xs","FormattedMessage","Object","entries","otherVersion","aliasedVersion","values","JSON","stringify","useEditAliasesModal","onSuccess","onSave","getTitle","description","isLoading","setIsLoading","showModal","setShowModal","form","LegacyForm","useForm","errorMessage","setErrorMessage","setExistingAliases","currentlyEditedVersion","setCurrentlyEditedVersion","showEditAliasesModal","versionNumber","modelVersionAliases","conflictedAliases","useMemo","otherVersionMappings","reduce","aliasMap","aliasEntry","_aliasMap$find","some","find","push","_version$aliases","alias_name","result","isPristine","isEqual","slice","sort","isExceedingLimit","isInvalid","EditAliasesModal","Modal","componentId","visible","footer","Button","onClick","loading","type","save","then","catch","e","ErrorWrapper","extractedErrorMessage","getMessageField","getUserVisibleError","text","message","destroyOnClose","title","onCancel","confirmLoading","Typography","Paragraph","layout","Item","flexDirection","gap","Alert","role","limit","CopyActionButton","buttonProps","copyText","copyTooltip","isInsideInputGroup","onCopy","tooltipProps","actionIcon","copy","handleTooltipOpenChange","tooltipOpen","tooltipMessage","useCopyController","button","icon","size","inputGroupButton","Tooltip","content","onOpenChange","ShowArtifactCodeSnippet","code","CopyButton","zIndex","position","top","right","showLabel","CopyIcon","CodeSnippet","language","showLineNumbers","style","sm","colors","textPrimary","backgroundColor","backgroundSecondary","wrapLongLines","copyMessage","copiedMessage","clipboard","useClipboard","copiedTimerIdRef","useRef","copied","setCopied","setOpen","useEffect","window","clearTimeout","current","CheckIcon","setTimeout","ariaLabel","wordWrap","attribute","builtin","char","class","constant","hexcode","symbol","queryFn","async","queryKey","_versionsResponse$mod","promptName","detailsResponse","versionsResponse","Promise","all","RegisteredPromptsApi","getPromptDetails","getPromptVersions","prompt","registered_model","versions","model_versions","PromptVersionsTableAliasesCell","getValue","row","original","table","options","meta","aliasesByVersion","registeredPrompt","mvAliases","ModelVersionTableAliasesCell","modelName","onAddEdit","PromptVersionsDiffSelectorButton","isSelectedFirstToCompare","isSelectedSecondToCompare","onSelectFirst","onSelectSecond","width","general","buttonHeight","alignItems","paddingRight","height","buttonInnerHeight","flex","delayDuration","side","border","actionDefaultBorderFocus","actionDefaultBorderDefault","borderRight","marginLeft","borderTopLeftRadius","borders","borderRadiusMd","borderBottomLeftRadius","actionDefaultBackgroundPress","actionDefaultBackgroundDefault","actionDefaultBackgroundHover","borderLeft","borderTopRightRadius","borderBottomRightRadius","PromptVersionsTable","promptVersions","onUpdateComparedVersion","onUpdateSelectedVersion","comparedVersion","selectedVersion","columns","resultColumns","header","accessorKey","cell","PromptsListTableVersionCell","PromptVersionsTableMode","TABLE","accessorFn","creation_timestamp","Utils","formatTimestamp","useReactTable","data","getRowId","getCoreRowModel","Table","scrollable","empty","Empty","TableRow","isHeader","getLeafHeaders","TableHeader","flexRender","column","columnDef","getContext","TableSkeletonRows","getRowModel","rows","isSelectedSingle","PREVIEW","includes","COMPARE","showCursorForEntireRow","heightBase","getAllCells","TableCell","md","ChevronRightIcon","promptDetailsViewStateReducer","state","action","PromptVersionRuns","isLoadingRuns","runIds","runInfoMap","showAll","setShowAll","visibleCount","Math","min","hasMore","_Fragment","Text","ParagraphSkeleton","flexWrap","runId","index","runInfo","isNil","experimentId","runUuid","runName","Link","to","Routes","getRunPageRoute","count","PromptVersionTags","tags","onEditVersionMetadata","shouldAllowEditingMetadata","editButton","PencilIcon","KeyValueTag","key","Hint","PromptVersionMetadata","registeredPromptVersion","onEditVersion","showEditPromptVersionMetadataModal","isBaseline","_registeredPromptVers3","_registeredPromptVers","_registeredPromptVers2","tagValue","REGISTERED_PROMPT_SOURCE_RUN_IDS","split","trim","usePromptRunsInfo","runUuids","queryResults","useQueries","queries","MlflowService","getRun","run_id","transformGetRunResponse","forEach","queryResult","_queryResult$data","_queryResult$data$run","run","info","visibleTagList","isUserFacingTag","versionElement","undefined","gridTemplateColumns","gridAutoRows","typography","lineHeightLg","rowGap","columnGap","PROMPT_VARIABLE_REGEX","PromptContentPreview","promptVersion","onUpdatedContent","onDeletedVersion","getPromptContentTagValue","DeletePromptModal","openModal","openDeleteModal","useDeletePromptVersionModal","mutate","useMutation","mutationFn","deleteRegisteredPromptVersion","okText","okButtonProps","danger","onOk","cancelText","showUsageExample","setShowUsageExample","variableNames","variables","match","exec","uniq","buildCodeSnippetContent","paddingTop","borderRadiusSm","Title","level","TrashIcon","PlayIcon","Spacer","shrinks","codeSnippetContent","join","_ref5","_ref6","_ref7","_ref8","PromptContentCompare","baselineVersion","onSwitchSides","baselineValue","comparedValue","diff","_diffWords","diffWords","addedBackground","isDarkMode","green700","green300","removedBackground","red700","red300","baseline","compared","paddingLeft","heightSm","ExpandMoreIcon","part","added","removed","PromptsListTableTagsBox","promptEntity","onTagsUpdated","EditTagsModal","showEditPromptTagsModal","useUpdateRegisteredPromptTags","containsTags","paddingBottom","PromptNotFoundView","ErrorView","statusCode","subMessage","fallbackHomePageReactRoute","promptsPageRoute","getAliasesModalTitle","PromptsDetailsPage","_promptDetailsData$pr3","_promptDetailsData$pr4","_promptDetailsData$pr7","useParams","navigate","useNavigate","dispatch","useDispatch","invariant","promptDetailsData","refetch","error","promptLoadError","usePromptDetailsQuery","_queryResult$error","useQuery","retry","CreatePromptModal","openCreateVersionModal","useCreatePromptModal","CreatePromptModalMode","CreatePromptVersion","latestVersion","first","setPreviewMode","useDeletePromptModal","deleteRegisteredPrompt","EditPromptVersionMetadataModal","useUpdatePromptVersionMetadataModal","updateMutation","toAdd","toDelete","setRegisteredPromptVersionTag","deleteRegisteredPromptVersionTag","showEditTagsModal","useEditKeyValueTagsModal","valueRequired","saveTagsHandler","currentTags","newTags","addedOrModifiedTags","deletedTags","diffCurrentAndNewTags","resolve","reject","onError","_promptVersion$tags","setCompareMode","setTableMode","switchSides","viewState","setSelectedVersion","setComparedVersion","dispatchViewMode","useReducer","versionEntity","firstVersion","_first","_promptDetailsData$ve","usePromptDetailsPageViewState","isEmptyVersions","showPreviewPane","selectedVersionEntity","comparedVersionEntity","_promptDetailsData$pr","_promptDetailsData$pr2","_promptDetailsData$pr5","_promptDetailsData$pr6","setModelVersionAliasesApi","breadcrumbs","Breadcrumb","ScrollablePageWrapper","Skeleton","Header","buttons","DropdownMenu","Root","Trigger","asChild","OverflowIcon","Content","SegmentedControlGroup","SegmentedControlButton","ZoomMarqueeSelection","TableIcon","Boolean","ColumnsIcon","isEmpty","GenericSkeleton","TableSkeleton","lines","lg","withErrorBoundary","ErrorUtils","mlflowServices","EXPERIMENTS","PromptPageErrorHandler","className","Tag","typographyBoldFontWeight","maxWidth","textOverflow","marginTop","SnippetActionButton","LegacyTooltip","SnippetCopyAction","props","SyntaxHighlighter","registerLanguage","sql","java","python","go","javascript","yaml","json","snippetPadding","themesStyles","light","lightStyle","duotoneDark","duotoneDarkStyle","actions","lineNumberStyle","wrapLines","PreTag","customStyle","codeTagProps","pick"],"sourceRoot":""}